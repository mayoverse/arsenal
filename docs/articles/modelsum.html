<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The modelsum function • arsenal</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The modelsum function">
<meta property="og:description" content="arsenal">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">arsenal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/comparedf.html">The comparedf function</a>
    </li>
    <li>
      <a href="../articles/freqlist.html">The freqlist function</a>
    </li>
    <li>
      <a href="../articles/labels.html">A Few Notes on Labels</a>
    </li>
    <li>
      <a href="../articles/modelsum.html">The modelsum function</a>
    </li>
    <li>
      <a href="../articles/paired.html">The paired function</a>
    </li>
    <li>
      <a href="../articles/tableby.html">The tableby function</a>
    </li>
    <li>
      <a href="../articles/write2.html">The write2 function</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mayoverse/arsenal/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="modelsum_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="modelsum_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="modelsum_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The modelsum function</h1>
                        <h4 class="author">Beth Atkinson, Ethan Heinzen, Pat Votruba, Jason Sinnwell, Shannon McDonnell and Greg Dougherty</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mayoverse/arsenal/blob/master/vignettes/modelsum.Rmd"><code>vignettes/modelsum.Rmd</code></a></small>
      <div class="hidden name"><code>modelsum.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Very often we are asked to summarize model results from multiple fits into a nice table. The endpoint might be of different types (e.g., survival, case/control, continuous) and there may be several independent variables that we want to examine univariately or adjusted for certain variables such as age and sex. Locally at Mayo, the SAS macros <code>%modelsum</code>, <code>%glmuniv</code>, and <code>%logisuni</code> were written to create such summary tables. With the increasing interest in R, we have developed the function <code>modelsum</code> to create similar tables within the R environment.</p>
<p>In developing the <code>modelsum</code> function, the goal was to bring the best features of these macros into an R function. However, the task was not simply to duplicate all the functionality, but rather to make use of R’s strengths (modeling, method dispersion, flexibility in function definition and output format) and make a tool that fits the needs of R users. Additionally, the results needed to fit within the general reproducible research framework so the tables could be displayed within an R markdown report.</p>
<p>This report provides step-by-step directions for using the functions associated with <code>modelsum</code>. All functions presented here are available within the <code>arsenal</code> package. An assumption is made that users are somewhat familiar with R markdown documents. For those who are new to the topic, a good initial resource is available at <a href="https://rmarkdown.rstudio.com/">rmarkdown.rstudio.com</a>.</p>
</div>
<div id="simple-example" class="section level1">
<h1 class="hasAnchor">
<a href="#simple-example" class="anchor"></a>Simple Example</h1>
<p>The first step when using the <code>modelsum</code> function is to load the <code>arsenal</code> package. All the examples in this report use a dataset called <code>mockstudy</code> made available by Paul Novotny which includes a variety of types of variables (character, numeric, factor, ordered factor, survival) to use as examples.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">require</span>(arsenal)</span>
<span id="cb1-2"><a href="#cb1-2"></a>Loading required package<span class="op">:</span><span class="st"> </span>arsenal</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(mockstudy) <span class="co"># load data</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(mockstudy)  <span class="co"># look at how many subjects and variables are in the dataset </span></span>
<span id="cb1-5"><a href="#cb1-5"></a>[<span class="dv">1</span>] <span class="dv">1499</span>   <span class="dv">14</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># help(mockstudy) # learn more about the dataset and variables</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">str</span>(mockstudy) <span class="co"># quick look at the data</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="st">'data.frame'</span><span class="op">:</span><span class="st">   </span><span class="dv">1499</span> obs. of  <span class="dv">14</span> variables<span class="op">:</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="st"> </span><span class="er">$</span><span class="st"> </span>case       <span class="op">:</span><span class="st"> </span>int  <span class="dv">110754</span> <span class="dv">99706</span> <span class="dv">105271</span> <span class="dv">105001</span> <span class="dv">112263</span> <span class="dv">86205</span> <span class="dv">99508</span> <span class="dv">90158</span> <span class="dv">88989</span> <span class="dv">90515</span> ...</span>
<span id="cb1-10"><a href="#cb1-10"></a> <span class="op">$</span><span class="st"> </span>age        <span class="op">:</span><span class="st"> </span>int  <span class="dv">67</span> <span class="dv">74</span> <span class="dv">50</span> <span class="dv">71</span> <span class="dv">69</span> <span class="dv">56</span> <span class="dv">50</span> <span class="dv">57</span> <span class="dv">51</span> <span class="dv">63</span> ...</span>
<span id="cb1-11"><a href="#cb1-11"></a>  ..<span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">"label"</span>)=<span class="st"> </span>chr <span class="st">"Age in Years"</span></span>
<span id="cb1-12"><a href="#cb1-12"></a> <span class="op">$</span><span class="st"> </span>arm        <span class="op">:</span><span class="st"> </span>chr  <span class="st">"F: FOLFOX"</span> <span class="st">"A: IFL"</span> <span class="st">"A: IFL"</span> <span class="st">"G: IROX"</span> ...</span>
<span id="cb1-13"><a href="#cb1-13"></a>  ..<span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">"label"</span>)=<span class="st"> </span>chr <span class="st">"Treatment Arm"</span></span>
<span id="cb1-14"><a href="#cb1-14"></a> <span class="op">$</span><span class="st"> </span>sex        <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">"Male"</span>,<span class="st">"Female"</span><span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> ...</span>
<span id="cb1-15"><a href="#cb1-15"></a> <span class="op">$</span><span class="st"> </span>race       <span class="op">:</span><span class="st"> </span>chr  <span class="st">"Caucasian"</span> <span class="st">"Caucasian"</span> <span class="st">"Caucasian"</span> <span class="st">"Caucasian"</span> ...</span>
<span id="cb1-16"><a href="#cb1-16"></a>  ..<span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">"label"</span>)=<span class="st"> </span>chr <span class="st">"Race"</span></span>
<span id="cb1-17"><a href="#cb1-17"></a> <span class="op">$</span><span class="st"> </span>fu.time    <span class="op">:</span><span class="st"> </span>int  <span class="dv">922</span> <span class="dv">270</span> <span class="dv">175</span> <span class="dv">128</span> <span class="dv">233</span> <span class="dv">120</span> <span class="dv">369</span> <span class="dv">421</span> <span class="dv">387</span> <span class="dv">363</span> ...</span>
<span id="cb1-18"><a href="#cb1-18"></a> <span class="op">$</span><span class="st"> </span>fu.stat    <span class="op">:</span><span class="st"> </span>int  <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> ...</span>
<span id="cb1-19"><a href="#cb1-19"></a> <span class="op">$</span><span class="st"> </span>ps         <span class="op">:</span><span class="st"> </span>int  <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb1-20"><a href="#cb1-20"></a> <span class="op">$</span><span class="st"> </span>hgb        <span class="op">:</span><span class="st"> </span>num  <span class="fl">11.5</span> <span class="fl">10.7</span> <span class="fl">11.1</span> <span class="fl">12.6</span> <span class="dv">13</span> <span class="fl">10.2</span> <span class="fl">13.3</span> <span class="fl">12.1</span> <span class="fl">13.8</span> <span class="fl">12.1</span> ...</span>
<span id="cb1-21"><a href="#cb1-21"></a> <span class="op">$</span><span class="st"> </span>bmi        <span class="op">:</span><span class="st"> </span>num  <span class="fl">25.1</span> <span class="fl">19.5</span> <span class="ot">NA</span> <span class="fl">29.4</span> <span class="fl">26.4</span> ...</span>
<span id="cb1-22"><a href="#cb1-22"></a>  ..<span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">"label"</span>)=<span class="st"> </span>chr <span class="st">"Body Mass Index (kg/m^2)"</span></span>
<span id="cb1-23"><a href="#cb1-23"></a> <span class="op">$</span><span class="st"> </span>alk.phos   <span class="op">:</span><span class="st"> </span>int  <span class="dv">160</span> <span class="dv">290</span> <span class="dv">700</span> <span class="dv">771</span> <span class="dv">350</span> <span class="dv">569</span> <span class="dv">162</span> <span class="dv">152</span> <span class="dv">231</span> <span class="dv">492</span> ...</span>
<span id="cb1-24"><a href="#cb1-24"></a> <span class="op">$</span><span class="st"> </span>ast        <span class="op">:</span><span class="st"> </span>int  <span class="dv">35</span> <span class="dv">52</span> <span class="dv">100</span> <span class="dv">68</span> <span class="dv">35</span> <span class="dv">27</span> <span class="dv">16</span> <span class="dv">12</span> <span class="dv">25</span> <span class="dv">18</span> ...</span>
<span id="cb1-25"><a href="#cb1-25"></a> <span class="op">$</span><span class="st"> </span>mdquality.s<span class="op">:</span><span class="st"> </span>int  <span class="ot">NA</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="ot">NA</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb1-26"><a href="#cb1-26"></a> <span class="op">$</span><span class="st"> </span>age.ord    <span class="op">:</span><span class="st"> </span>Ord.factor w<span class="op">/</span><span class="st"> </span><span class="dv">8</span> levels <span class="st">"10-19"</span><span class="op">&lt;</span><span class="st">"20-29"</span><span class="op">&lt;</span>..<span class="op">:</span><span class="st"> </span><span class="dv">6</span> <span class="dv">7</span> <span class="dv">4</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">6</span> ...</span></code></pre></div>
<p>To create a simple linear regression table (the default), use a formula statement to specify the variables that you want summarized. The example below predicts BMI with the variables sex and age.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">&gt;</span><span class="st"> </span>tab1 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</span></code></pre></div>
<p>If you want to take a quick look at the table, you can use <code>summary</code> on your modelsum object and the table will print out as text in your R console window. If you use <code>summary</code> without any options you will see a number of <span class="math inline">\(\&amp;nbsp;\)</span> statements which translates to “space” in HTML.</p>
<div id="pretty-text-version-of-table" class="section level2">
<h2 class="hasAnchor">
<a href="#pretty-text-version-of-table" class="anchor"></a>Pretty text version of table</h2>
<p>If you want a nicer version in your console window then adding the <code>text=TRUE</code> option.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1, <span class="dt">text=</span><span class="ot">TRUE</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="op">|</span><span class="st">             </span><span class="er">|</span>estimate <span class="op">|</span>std.error <span class="op">|</span>p.value <span class="op">|</span>adj.r.squared <span class="op">|</span>Nmiss <span class="op">|</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="er">|:</span><span class="op">------------</span><span class="er">|:</span><span class="op">--------</span><span class="er">|:</span><span class="op">---------</span><span class="er">|:</span><span class="op">-------</span><span class="er">|:</span><span class="op">-------------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="er">|</span>(Intercept)  <span class="op">|</span><span class="fl">27.491</span>   <span class="op">|</span><span class="fl">0.181</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.004</span>         <span class="op">|</span><span class="dv">33</span>    <span class="op">|</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="er">|</span>sex Female   <span class="op">|-</span><span class="fl">0.731</span>   <span class="op">|</span><span class="fl">0.290</span>     <span class="op">|</span><span class="fl">0.012</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="er">|</span>(Intercept)  <span class="op">|</span><span class="fl">26.424</span>   <span class="op">|</span><span class="fl">0.752</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.000</span>         <span class="op">|</span><span class="dv">33</span>    <span class="op">|</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="er">|</span>Age <span class="cf">in</span> Years <span class="op">|</span><span class="fl">0.013</span>    <span class="op">|</span><span class="fl">0.012</span>     <span class="op">|</span><span class="fl">0.290</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span></code></pre></div>
</div>
<div id="pretty-rmarkdown-version-of-table" class="section level2">
<h2 class="hasAnchor">
<a href="#pretty-rmarkdown-version-of-table" class="anchor"></a>Pretty Rmarkdown version of table</h2>
<p>In order for the report to look nice within an R markdown (knitr) report, you just need to specify <code>results="asis"</code> when creating the r chunk. This changes the layout slightly (compresses it) and bolds the variable names.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="data-frame-version-of-table" class="section level2">
<h2 class="hasAnchor">
<a href="#data-frame-version-of-table" class="anchor"></a>Data frame version of table</h2>
<p>If you want a data.frame version, simply use <code>as.data.frame</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">as.data.frame</span>(tab1)</span>
<span id="cb5-2"><a href="#cb5-2"></a>  y.term                  y.label strata.term adjustment model        term</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="dv">1</span>    bmi Body Mass <span class="kw">Index</span> (kg<span class="op">/</span>m<span class="op">^</span><span class="dv">2</span>)             unadjusted     <span class="dv">1</span> (Intercept)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="dv">2</span>    bmi Body Mass <span class="kw">Index</span> (kg<span class="op">/</span>m<span class="op">^</span><span class="dv">2</span>)             unadjusted     <span class="dv">1</span>   sexFemale</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="dv">3</span>    bmi Body Mass <span class="kw">Index</span> (kg<span class="op">/</span>m<span class="op">^</span><span class="dv">2</span>)             unadjusted     <span class="dv">2</span> (Intercept)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="dv">4</span>    bmi Body Mass <span class="kw">Index</span> (kg<span class="op">/</span>m<span class="op">^</span><span class="dv">2</span>)             unadjusted     <span class="dv">2</span>         age</span>
<span id="cb5-7"><a href="#cb5-7"></a>         label term.type    estimate  std.error       p.value adj.r.squared</span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="dv">1</span>  (Intercept) Intercept <span class="fl">27.49147713</span> <span class="fl">0.18134740</span>  <span class="fl">0.000000e+00</span>  <span class="fl">3.632258e-03</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="dv">2</span>   sex Female      Term <span class="fl">-0.73105055</span> <span class="fl">0.29032223</span>  <span class="fl">1.190605e-02</span>  <span class="fl">3.632258e-03</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="dv">3</span>  (Intercept) Intercept <span class="fl">26.42372272</span> <span class="fl">0.75211474</span> <span class="fl">1.279109e-196</span>  <span class="fl">8.354809e-05</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="dv">4</span> Age <span class="cf">in</span> Years      Term  <span class="fl">0.01304859</span> <span class="fl">0.01231653</span>  <span class="fl">2.895753e-01</span>  <span class="fl">8.354809e-05</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>  Nmiss</span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="dv">1</span>    <span class="dv">33</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="dv">2</span>    <span class="dv">33</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="dv">3</span>    <span class="dv">33</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="dv">4</span>    <span class="dv">33</span></span></code></pre></div>
</div>
<div id="add-an-adjustor-to-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#add-an-adjustor-to-the-model" class="anchor"></a>Add an adjustor to the model</h2>
<p>The argument <code>adjust</code> allows the user to indicate that all the variables should be adjusted for these terms. To adjust each model for age and sex (for instance), we use <code>adjust = ~ age + sex</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">&gt;</span><span class="st"> </span>tab2 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(alk.phos <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>ps <span class="op">+</span><span class="st"> </span>hgb, <span class="dt">adjust=</span> <span class="op">~</span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data=</span>mockstudy)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab2)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">175.548</td>
<td align="left">20.587</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.001</td>
<td align="left">266</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">-13.701</td>
<td align="left">8.730</td>
<td align="left">0.117</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">-2.245</td>
<td align="left">9.860</td>
<td align="left">0.820</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.017</td>
<td align="left">0.319</td>
<td align="left">0.956</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">3.016</td>
<td align="left">7.521</td>
<td align="left">0.688</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">148.391</td>
<td align="left">19.585</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.045</td>
<td align="left">266</td>
</tr>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="left">46.721</td>
<td align="left">5.987</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.084</td>
<td align="left">0.311</td>
<td align="left">0.787</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.169</td>
<td align="left">7.343</td>
<td align="left">0.874</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">336.554</td>
<td align="left">32.239</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.031</td>
<td align="left">266</td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="left">-13.845</td>
<td align="left">2.137</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.095</td>
<td align="left">0.314</td>
<td align="left">0.763</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-5.980</td>
<td align="left">7.516</td>
<td align="left">0.426</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="models-for-each-endpoint-type" class="section level1">
<h1 class="hasAnchor">
<a href="#models-for-each-endpoint-type" class="anchor"></a>Models for each endpoint type</h1>
<p>To make sure the correct model is run you need to specify “family”. The options available right now are : gaussian, binomial, survival, and poisson. If there is enough interest, additional models can be added.</p>
<div id="gaussian" class="section level2">
<h2 class="hasAnchor">
<a href="#gaussian" class="anchor"></a>Gaussian</h2>
<div id="fit-and-summarize-linear-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#fit-and-summarize-linear-regression-model" class="anchor"></a>Fit and summarize linear regression model</h3>
<p>Look at whether there is any evidence that AlkPhos values vary by study arm after adjusting for sex and age (assuming a linear age relationship).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="op">&gt;</span><span class="st"> </span>fit &lt;-<span class="st"> </span><span class="kw">lm</span>(alk.phos <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data=</span>mockstudy)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit)</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>Call<span class="op">:</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="kw">lm</span>(<span class="dt">formula =</span> alk.phos <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data =</span> mockstudy)</span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a>Residuals<span class="op">:</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="st">    </span>Min      1Q  Median      3Q     Max </span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="fl">-168.80</span>  <span class="fl">-81.45</span>  <span class="fl">-47.17</span>   <span class="fl">37.39</span>  <span class="fl">853.56</span> </span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a>Coefficients<span class="op">:</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="st">              </span>Estimate Std. Error t value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>t<span class="op">|</span>)    </span>
<span id="cb7-13"><a href="#cb7-13"></a>(Intercept)  <span class="fl">175.54808</span>   <span class="fl">20.58665</span>   <span class="fl">8.527</span>   <span class="op">&lt;</span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-13.70062</span>    <span class="fl">8.72963</span>  <span class="fl">-1.569</span>    <span class="fl">0.117</span>    </span>
<span id="cb7-15"><a href="#cb7-15"></a>armG<span class="op">:</span><span class="st"> </span>IROX    <span class="fl">-2.24498</span>    <span class="fl">9.86004</span>  <span class="fl">-0.228</span>    <span class="fl">0.820</span>    </span>
<span id="cb7-16"><a href="#cb7-16"></a>age           <span class="fl">-0.01741</span>    <span class="fl">0.31878</span>  <span class="fl">-0.055</span>    <span class="fl">0.956</span>    </span>
<span id="cb7-17"><a href="#cb7-17"></a>sexFemale      <span class="fl">3.01598</span>    <span class="fl">7.52097</span>   <span class="fl">0.401</span>    <span class="fl">0.688</span>    </span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="op">---</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb7-20"><a href="#cb7-20"></a></span>
<span id="cb7-21"><a href="#cb7-21"></a>Residual standard error<span class="op">:</span><span class="st"> </span><span class="fl">128.5</span> on <span class="dv">1228</span> degrees of freedom</span>
<span id="cb7-22"><a href="#cb7-22"></a>  (<span class="dv">266</span> observations deleted due to missingness)</span>
<span id="cb7-23"><a href="#cb7-23"></a>Multiple R<span class="op">-</span>squared<span class="op">:</span><span class="st">  </span><span class="fl">0.002552</span>,  Adjusted R<span class="op">-</span>squared<span class="op">:</span><span class="st">  </span><span class="fl">-0.0006969</span> </span>
<span id="cb7-24"><a href="#cb7-24"></a>F<span class="op">-</span>statistic<span class="op">:</span><span class="st"> </span><span class="fl">0.7855</span> on <span class="dv">4</span> and <span class="dv">1228</span> DF,  p<span class="op">-</span>value<span class="op">:</span><span class="st"> </span><span class="fl">0.5346</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">plot</span>(fit)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-3-1.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-3-2.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-3-3.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-3-4.png" width="700"></p>
<p>The results suggest that the endpoint may need to be transformed. Calculating the Box-Cox transformation suggests a log transformation.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">require</span>(MASS)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">boxcox</span>(fit)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="op">&gt;</span><span class="st"> </span>fit2 &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data=</span>mockstudy)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit2)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a>Call<span class="op">:</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw">lm</span>(<span class="dt">formula =</span> <span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data =</span> mockstudy)</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a>Residuals<span class="op">:</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="st">    </span>Min      1Q  Median      3Q     Max </span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="fl">-3.0098</span> <span class="fl">-0.4470</span> <span class="fl">-0.1065</span>  <span class="fl">0.4205</span>  <span class="fl">2.0620</span> </span>
<span id="cb9-10"><a href="#cb9-10"></a></span>
<span id="cb9-11"><a href="#cb9-11"></a>Coefficients<span class="op">:</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="st">               </span>Estimate Std. Error t value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>t<span class="op">|</span>)    </span>
<span id="cb9-13"><a href="#cb9-13"></a>(Intercept)   <span class="fl">4.9692474</span>  <span class="fl">0.1025239</span>  <span class="fl">48.469</span>   <span class="op">&lt;</span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-0.0766798</span>  <span class="fl">0.0434746</span>  <span class="fl">-1.764</span>    <span class="fl">0.078</span> .  </span>
<span id="cb9-15"><a href="#cb9-15"></a>armG<span class="op">:</span><span class="st"> </span>IROX   <span class="fl">-0.0192828</span>  <span class="fl">0.0491041</span>  <span class="fl">-0.393</span>    <span class="fl">0.695</span>    </span>
<span id="cb9-16"><a href="#cb9-16"></a>age          <span class="fl">-0.0004058</span>  <span class="fl">0.0015876</span>  <span class="fl">-0.256</span>    <span class="fl">0.798</span>    </span>
<span id="cb9-17"><a href="#cb9-17"></a>sexFemale     <span class="fl">0.0179253</span>  <span class="fl">0.0374553</span>   <span class="fl">0.479</span>    <span class="fl">0.632</span>    </span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="op">---</span></span>
<span id="cb9-19"><a href="#cb9-19"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb9-20"><a href="#cb9-20"></a></span>
<span id="cb9-21"><a href="#cb9-21"></a>Residual standard error<span class="op">:</span><span class="st"> </span><span class="fl">0.6401</span> on <span class="dv">1228</span> degrees of freedom</span>
<span id="cb9-22"><a href="#cb9-22"></a>  (<span class="dv">266</span> observations deleted due to missingness)</span>
<span id="cb9-23"><a href="#cb9-23"></a>Multiple R<span class="op">-</span>squared<span class="op">:</span><span class="st">  </span><span class="fl">0.003121</span>,  Adjusted R<span class="op">-</span>squared<span class="op">:</span><span class="st">  </span><span class="fl">-0.0001258</span> </span>
<span id="cb9-24"><a href="#cb9-24"></a>F<span class="op">-</span>statistic<span class="op">:</span><span class="st"> </span><span class="fl">0.9613</span> on <span class="dv">4</span> and <span class="dv">1228</span> DF,  p<span class="op">-</span>value<span class="op">:</span><span class="st"> </span><span class="fl">0.4278</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">plot</span>(fit2)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-5-1.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-5-2.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-5-3.png" width="700"><img src="modelsum_files/figure-html/unnamed-chunk-5-4.png" width="700"></p>
<p>Finally, look to see whether there there is a non-linear relationship with age.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">require</span>(splines)</span>
<span id="cb10-2"><a href="#cb10-2"></a>Loading required package<span class="op">:</span><span class="st"> </span>splines</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="op">&gt;</span><span class="st"> </span>fit3 &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span><span class="kw">ns</span>(age, <span class="dt">df=</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data=</span>mockstudy)</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># test whether there is a difference between models </span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="er">&gt;</span><span class="st"> </span>stats<span class="op">::</span><span class="kw">anova</span>(fit2,fit3)</span>
<span id="cb10-7"><a href="#cb10-7"></a>Analysis of Variance Table</span>
<span id="cb10-8"><a href="#cb10-8"></a></span>
<span id="cb10-9"><a href="#cb10-9"></a>Model <span class="dv">1</span><span class="op">:</span><span class="st"> </span><span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex</span>
<span id="cb10-10"><a href="#cb10-10"></a>Model <span class="dv">2</span><span class="op">:</span><span class="st"> </span><span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span><span class="kw">ns</span>(age, <span class="dt">df =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span>sex</span>
<span id="cb10-11"><a href="#cb10-11"></a>  Res.Df    RSS Df Sum of Sq      F  <span class="kw">Pr</span>(<span class="op">&gt;</span>F)  </span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="dv">1</span>   <span class="dv">1228</span> <span class="fl">503.19</span>                              </span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="dv">2</span>   <span class="dv">1227</span> <span class="fl">502.07</span>  <span class="dv">1</span>    <span class="fl">1.1137</span> <span class="fl">2.7218</span> <span class="fl">0.09924</span> .</span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="op">---</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># look at functional form of age</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">termplot</span>(fit3, <span class="dt">term=</span><span class="dv">2</span>, <span class="dt">se=</span>T, <span class="dt">rug=</span>T)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>In this instance it looks like there isn’t enough evidence to say that the relationship is non-linear.</p>
</div>
<div id="extract-data-using-the-broom-package" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-the-broom-package" class="anchor"></a>Extract data using the <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="op">&gt;</span><span class="st"> </span>tmp &lt;-<span class="st"> </span><span class="kw">tidy</span>(fit3) <span class="co"># coefficients, p-values</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(tmp)</span>
<span id="cb11-3"><a href="#cb11-3"></a>[<span class="dv">1</span>] <span class="st">"tbl_df"</span>     <span class="st">"tbl"</span>        <span class="st">"data.frame"</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="op">&gt;</span><span class="st"> </span>tmp</span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co"># A tibble: 6 x 5</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  term             estimate std.error statistic   p.value</span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">               </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="dv">1</span> (Intercept)        <span class="fl">4.76</span>      <span class="fl">0.141</span>     <span class="fl">33.8</span>   <span class="fl">1.93e-177</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="dv">2</span> armF<span class="op">:</span><span class="st"> </span>FOLFOX      <span class="fl">-0.0767</span>    <span class="fl">0.0434</span>    <span class="fl">-1.77</span>  <span class="fl">7.78</span>e<span class="op">-</span><span class="st">  </span><span class="dv">2</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="dv">3</span> armG<span class="op">:</span><span class="st"> </span>IROX        <span class="fl">-0.0195</span>    <span class="fl">0.0491</span>    <span class="fl">-0.396</span> <span class="fl">6.92</span>e<span class="op">-</span><span class="st">  </span><span class="dv">1</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="dv">4</span> <span class="kw">ns</span>(age, <span class="dt">df =</span> <span class="dv">2</span>)<span class="dv">1</span>   <span class="fl">0.330</span>     <span class="fl">0.260</span>      <span class="fl">1.27</span>  <span class="fl">2.04</span>e<span class="op">-</span><span class="st">  </span><span class="dv">1</span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="dv">5</span> <span class="kw">ns</span>(age, <span class="dt">df =</span> <span class="dv">2</span>)<span class="dv">2</span>  <span class="fl">-0.101</span>     <span class="fl">0.0935</span>    <span class="fl">-1.08</span>  <span class="fl">2.82</span>e<span class="op">-</span><span class="st">  </span><span class="dv">1</span></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="dv">6</span> sexFemale          <span class="fl">0.0183</span>    <span class="fl">0.0374</span>     <span class="fl">0.489</span> <span class="fl">6.25</span>e<span class="op">-</span><span class="st">  </span><span class="dv">1</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">glance</span>(fit3)</span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co"># A tibble: 1 x 12</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>  r.squared adj.r.squared sigma statistic p.value    df logLik   AIC   BIC</span>
<span id="cb11-18"><a href="#cb11-18"></a>      <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="dv">1</span>   <span class="fl">0.00533</span>       <span class="fl">0.00127</span> <span class="fl">0.640</span>      <span class="fl">1.31</span>   <span class="fl">0.255</span>     <span class="dv">5</span> <span class="fl">-1196.</span> <span class="fl">2405.</span> <span class="fl">2441.</span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="co"># … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="create-a-summary-table-using-modelsum" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="op">&gt;</span><span class="st"> </span>ms.logy &lt;-<span class="st"> </span><span class="kw">modelsum</span>(<span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>arm <span class="op">+</span><span class="st"> </span>ps <span class="op">+</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, <span class="dt">adjust=</span> <span class="op">~</span>age <span class="op">+</span><span class="st"> </span>sex, </span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="op">+</span><span class="st">                     </span><span class="dt">family=</span>gaussian,  </span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="op">+</span><span class="st">                     </span><span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"estimate"</span>,<span class="st">"CI.lower.estimate"</span>,<span class="st">"CI.upper.estimate"</span>,<span class="st">"p.value"</span>))</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(ms.logy)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">CI.lower.estimate</th>
<th align="left">CI.upper.estimate</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.969</td>
<td align="left">4.768</td>
<td align="left">5.170</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">-0.077</td>
<td align="left">-0.162</td>
<td align="left">0.009</td>
<td align="left">0.078</td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">-0.019</td>
<td align="left">-0.116</td>
<td align="left">0.077</td>
<td align="left">0.695</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.000</td>
<td align="left">-0.004</td>
<td align="left">0.003</td>
<td align="left">0.798</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">0.018</td>
<td align="left">-0.056</td>
<td align="left">0.091</td>
<td align="left">0.632</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">4.832</td>
<td align="left">4.640</td>
<td align="left">5.023</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="left">0.226</td>
<td align="left">0.167</td>
<td align="left">0.284</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">-0.001</td>
<td align="left">-0.004</td>
<td align="left">0.002</td>
<td align="left">0.636</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">0.009</td>
<td align="left">-0.063</td>
<td align="left">0.081</td>
<td align="left">0.814</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">5.765</td>
<td align="left">5.450</td>
<td align="left">6.080</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="left">-0.069</td>
<td align="left">-0.090</td>
<td align="left">-0.048</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.000</td>
<td align="left">-0.003</td>
<td align="left">0.003</td>
<td align="left">0.925</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.027</td>
<td align="left">-0.101</td>
<td align="left">0.046</td>
<td align="left">0.468</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="binomial" class="section level2">
<h2 class="hasAnchor">
<a href="#binomial" class="anchor"></a>Binomial</h2>
<div id="fit-and-summarize-logistic-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#fit-and-summarize-logistic-regression-model" class="anchor"></a>Fit and summarize logistic regression model</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">boxplot</span>(age <span class="op">~</span><span class="st"> </span>mdquality.s, <span class="dt">data=</span>mockstudy, <span class="dt">ylab=</span><span class="kw">attr</span>(mockstudy<span class="op">$</span>age,<span class="st">'label'</span>), <span class="dt">xlab=</span><span class="st">'mdquality.s'</span>)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="er">&gt;</span><span class="st"> </span>fit &lt;-<span class="st"> </span><span class="kw">glm</span>(mdquality.s <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data=</span>mockstudy, <span class="dt">family=</span>binomial)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit)</span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a>Call<span class="op">:</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="kw">glm</span>(<span class="dt">formula =</span> mdquality.s <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">family =</span> binomial, <span class="dt">data =</span> mockstudy)</span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a>Deviance Residuals<span class="op">:</span><span class="st"> </span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="st">    </span>Min       1Q   Median       3Q      Max  </span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="fl">-2.1832</span>   <span class="fl">0.4500</span>   <span class="fl">0.4569</span>   <span class="fl">0.4626</span>   <span class="fl">0.4756</span>  </span>
<span id="cb14-11"><a href="#cb14-11"></a></span>
<span id="cb14-12"><a href="#cb14-12"></a>Coefficients<span class="op">:</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="st">             </span>Estimate Std. Error z value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>z<span class="op">|</span>)    </span>
<span id="cb14-14"><a href="#cb14-14"></a>(Intercept)  <span class="fl">2.329442</span>   <span class="fl">0.514684</span>   <span class="fl">4.526</span> <span class="fl">6.01e-06</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>age         <span class="fl">-0.002353</span>   <span class="fl">0.008256</span>  <span class="fl">-0.285</span>    <span class="fl">0.776</span>    </span>
<span id="cb14-16"><a href="#cb14-16"></a>sexFemale    <span class="fl">0.039227</span>   <span class="fl">0.195330</span>   <span class="fl">0.201</span>    <span class="fl">0.841</span>    </span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="op">---</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb14-19"><a href="#cb14-19"></a></span>
<span id="cb14-20"><a href="#cb14-20"></a>(Dispersion parameter <span class="cf">for</span> binomial family taken to be <span class="dv">1</span>)</span>
<span id="cb14-21"><a href="#cb14-21"></a></span>
<span id="cb14-22"><a href="#cb14-22"></a>    Null deviance<span class="op">:</span><span class="st"> </span><span class="fl">807.68</span>  on <span class="dv">1246</span>  degrees of freedom</span>
<span id="cb14-23"><a href="#cb14-23"></a>Residual deviance<span class="op">:</span><span class="st"> </span><span class="fl">807.55</span>  on <span class="dv">1244</span>  degrees of freedom</span>
<span id="cb14-24"><a href="#cb14-24"></a>  (<span class="dv">252</span> observations deleted due to missingness)</span>
<span id="cb14-25"><a href="#cb14-25"></a>AIC<span class="op">:</span><span class="st"> </span><span class="fl">813.55</span></span>
<span id="cb14-26"><a href="#cb14-26"></a></span>
<span id="cb14-27"><a href="#cb14-27"></a>Number of Fisher Scoring iterations<span class="op">:</span><span class="st"> </span><span class="dv">4</span></span>
<span id="cb14-28"><a href="#cb14-28"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb14-29"><a href="#cb14-29"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># create Odd's ratio w/ confidence intervals</span></span>
<span id="cb14-30"><a href="#cb14-30"></a><span class="er">&gt;</span><span class="st"> </span>tmp &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">summary</span>(fit)<span class="op">$</span>coef)</span>
<span id="cb14-31"><a href="#cb14-31"></a><span class="op">&gt;</span><span class="st"> </span>tmp</span>
<span id="cb14-32"><a href="#cb14-32"></a>                Estimate  Std..Error    z.value     Pr...z..</span>
<span id="cb14-33"><a href="#cb14-33"></a>(Intercept)  <span class="fl">2.329441734</span> <span class="fl">0.514683688</span>  <span class="fl">4.5259677</span> <span class="fl">6.011977e-06</span></span>
<span id="cb14-34"><a href="#cb14-34"></a>age         <span class="fl">-0.002353404</span> <span class="fl">0.008255814</span> <span class="fl">-0.2850602</span> <span class="fl">7.755980e-01</span></span>
<span id="cb14-35"><a href="#cb14-35"></a>sexFemale    <span class="fl">0.039227292</span> <span class="fl">0.195330166</span>  <span class="fl">0.2008256</span> <span class="fl">8.408350e-01</span></span>
<span id="cb14-36"><a href="#cb14-36"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb14-37"><a href="#cb14-37"></a><span class="er">&gt;</span><span class="st"> </span>tmp<span class="op">$</span>OR &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">exp</span>(tmp[,<span class="dv">1</span>]),<span class="dv">2</span>)</span>
<span id="cb14-38"><a href="#cb14-38"></a><span class="op">&gt;</span><span class="st"> </span>tmp<span class="op">$</span>lower.CI &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">exp</span>(tmp[,<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span><span class="op">*</span><span class="st"> </span>tmp[,<span class="dv">2</span>]),<span class="dv">2</span>)</span>
<span id="cb14-39"><a href="#cb14-39"></a><span class="op">&gt;</span><span class="st"> </span>tmp<span class="op">$</span>upper.CI &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">exp</span>(tmp[,<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span><span class="op">*</span><span class="st"> </span>tmp[,<span class="dv">2</span>]),<span class="dv">2</span>)</span>
<span id="cb14-40"><a href="#cb14-40"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(tmp)[<span class="dv">4</span>] &lt;-<span class="st"> 'P-value'</span></span>
<span id="cb14-41"><a href="#cb14-41"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb14-42"><a href="#cb14-42"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">kable</span>(tmp[,<span class="kw">c</span>(<span class="st">'OR'</span>,<span class="st">'lower.CI'</span>,<span class="st">'upper.CI'</span>,<span class="st">'P-value'</span>)])</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">OR</th>
<th align="right">lower.CI</th>
<th align="right">upper.CI</th>
<th align="right">P-value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">10.27</td>
<td align="right">3.75</td>
<td align="right">28.17</td>
<td align="right">0.000006</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="right">1.00</td>
<td align="right">0.98</td>
<td align="right">1.01</td>
<td align="right">0.775598</td>
</tr>
<tr class="odd">
<td align="left">sexFemale</td>
<td align="right">1.04</td>
<td align="right">0.71</td>
<td align="right">1.53</td>
<td align="right">0.840835</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># Assess the predictive ability of the model</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="er">&gt;</span><span class="st"> </span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># code using the pROC package</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">require</span>(pROC)</span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="op">&gt;</span><span class="st"> </span>pred &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, <span class="dt">type=</span><span class="st">'response'</span>)</span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="op">&gt;</span><span class="st"> </span>tmp &lt;-<span class="st"> </span>pROC<span class="op">::</span><span class="kw">roc</span>(mockstudy<span class="op">$</span>mdquality.s[<span class="op">!</span><span class="kw">is.na</span>(mockstudy<span class="op">$</span>mdquality.s)]<span class="op">~</span><span class="st"> </span>pred, <span class="dt">plot=</span><span class="ot">TRUE</span>, <span class="dt">percent=</span><span class="ot">TRUE</span>)</span>
<span id="cb15-8"><a href="#cb15-8"></a>Setting levels<span class="op">:</span><span class="st"> </span>control =<span class="st"> </span><span class="dv">0</span>, case =<span class="st"> </span><span class="dv">1</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>Setting direction<span class="op">:</span><span class="st"> </span>controls <span class="op">&lt;</span><span class="st"> </span>cases</span></code></pre></div>
<p><img src="modelsum_files/figure-html/unnamed-chunk-9-2.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="op">&gt;</span><span class="st"> </span>tmp<span class="op">$</span>auc</span>
<span id="cb16-2"><a href="#cb16-2"></a>Area under the curve<span class="op">:</span><span class="st"> </span><span class="fl">50.69</span>%</span></code></pre></div>
</div>
<div id="extract-data-using-broom-package" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tidy</span>(fit, <span class="dt">exp=</span>T, <span class="dt">conf.int=</span>T) <span class="co"># coefficients, p-values, conf.intervals</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co"># A tibble: 3 x 7</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  term        estimate std.error statistic    p.value conf.low conf.high</span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="dv">1</span> (Intercept)   <span class="fl">10.3</span>     <span class="fl">0.515</span>       <span class="fl">4.53</span>  <span class="fl">0.00000601</span>    <span class="fl">3.83</span>      <span class="fl">28.9</span> </span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="dv">2</span> age            <span class="fl">0.998</span>   <span class="fl">0.00826</span>    <span class="fl">-0.285</span> <span class="fl">0.776</span>         <span class="fl">0.981</span>      <span class="fl">1.01</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="dv">3</span> sexFemale      <span class="fl">1.04</span>    <span class="fl">0.195</span>       <span class="fl">0.201</span> <span class="fl">0.841</span>         <span class="fl">0.712</span>      <span class="fl">1.53</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">glance</span>(fit) <span class="co"># model summary statistics</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co"># A tibble: 1 x 8</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs</span>
<span id="cb17-12"><a href="#cb17-12"></a>          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="dv">1</span>          <span class="fl">808.</span>    <span class="dv">1246</span>  <span class="fl">-404.</span>  <span class="fl">814.</span>  <span class="fl">829.</span>     <span class="fl">808.</span>        <span class="dv">1244</span>  <span class="dv">1247</span></span></code></pre></div>
</div>
<div id="create-a-summary-table-using-modelsum-1" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-1" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(mdquality.s <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">data=</span>mockstudy, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">family=</span>binomial))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.272</td>
<td align="left">3.831</td>
<td align="left">28.876</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.507</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.998</td>
<td align="left">0.981</td>
<td align="left">1.014</td>
<td align="left">0.776</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.040</td>
<td align="left">0.712</td>
<td align="left">1.534</td>
<td align="left">0.841</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">4.814</td>
<td align="left">1.709</td>
<td align="left">13.221</td>
<td align="left">0.003</td>
<td align="left">0.550</td>
<td align="left">273</td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.063</td>
<td align="left">0.220</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.053</td>
<td align="left">0.717</td>
<td align="left">1.561</td>
<td align="left">0.794</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="er">&gt;</span><span class="st"> </span>fitall &lt;-<span class="st"> </span><span class="kw">modelsum</span>(mdquality.s <span class="op">~</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, <span class="dt">family=</span>binomial,</span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="op">+</span><span class="st">                    </span><span class="dt">binomial.stats=</span><span class="kw">c</span>(<span class="st">"Nmiss2"</span>,<span class="st">"OR"</span>,<span class="st">"p.value"</span>))</span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fitall)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">p.value</th>
<th align="left">Nmiss2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.493</td>
<td align="left">&lt; 0.001</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.998</td>
<td align="left">0.766</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="survival" class="section level2">
<h2 class="hasAnchor">
<a href="#survival" class="anchor"></a>Survival</h2>
<div id="fit-and-summarize-a-cox-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#fit-and-summarize-a-cox-regression-model" class="anchor"></a>Fit and summarize a Cox regression model</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">require</span>(survival)</span>
<span id="cb20-2"><a href="#cb20-2"></a>Loading required package<span class="op">:</span><span class="st"> </span>survival</span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># multivariable model with all 3 terms</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="er">&gt;</span><span class="st"> </span>fit  &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, <span class="dt">data=</span>mockstudy)</span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit)</span>
<span id="cb20-7"><a href="#cb20-7"></a>Call<span class="op">:</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="kw">coxph</span>(<span class="dt">formula =</span> <span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, <span class="dt">data =</span> mockstudy)</span>
<span id="cb20-9"><a href="#cb20-9"></a></span>
<span id="cb20-10"><a href="#cb20-10"></a>  n=<span class="st"> </span><span class="dv">1499</span>, number of events=<span class="st"> </span><span class="dv">1356</span> </span>
<span id="cb20-11"><a href="#cb20-11"></a></span>
<span id="cb20-12"><a href="#cb20-12"></a>                  coef <span class="kw">exp</span>(coef)  <span class="kw">se</span>(coef)      z <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>z<span class="op">|</span>)    </span>
<span id="cb20-13"><a href="#cb20-13"></a>age           <span class="fl">0.004600</span>  <span class="fl">1.004611</span>  <span class="fl">0.002501</span>  <span class="fl">1.839</span>   <span class="fl">0.0659</span> .  </span>
<span id="cb20-14"><a href="#cb20-14"></a>sexFemale     <span class="fl">0.039893</span>  <span class="fl">1.040699</span>  <span class="fl">0.056039</span>  <span class="fl">0.712</span>   <span class="fl">0.4765</span>    </span>
<span id="cb20-15"><a href="#cb20-15"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-0.454650</span>  <span class="fl">0.634670</span>  <span class="fl">0.064878</span> <span class="fl">-7.008</span> <span class="fl">2.42e-12</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb20-16"><a href="#cb20-16"></a>armG<span class="op">:</span><span class="st"> </span>IROX   <span class="fl">-0.140785</span>  <span class="fl">0.868676</span>  <span class="fl">0.072760</span> <span class="fl">-1.935</span>   <span class="fl">0.0530</span> .  </span>
<span id="cb20-17"><a href="#cb20-17"></a><span class="op">---</span></span>
<span id="cb20-18"><a href="#cb20-18"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb20-19"><a href="#cb20-19"></a></span>
<span id="cb20-20"><a href="#cb20-20"></a>             <span class="kw">exp</span>(coef) <span class="kw">exp</span>(<span class="op">-</span>coef) lower <span class="fl">.95</span> upper <span class="fl">.95</span></span>
<span id="cb20-21"><a href="#cb20-21"></a>age             <span class="fl">1.0046</span>     <span class="fl">0.9954</span>    <span class="fl">0.9997</span>    <span class="fl">1.0095</span></span>
<span id="cb20-22"><a href="#cb20-22"></a>sexFemale       <span class="fl">1.0407</span>     <span class="fl">0.9609</span>    <span class="fl">0.9324</span>    <span class="fl">1.1615</span></span>
<span id="cb20-23"><a href="#cb20-23"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX    <span class="fl">0.6347</span>     <span class="fl">1.5756</span>    <span class="fl">0.5589</span>    <span class="fl">0.7207</span></span>
<span id="cb20-24"><a href="#cb20-24"></a>armG<span class="op">:</span><span class="st"> </span>IROX      <span class="fl">0.8687</span>     <span class="fl">1.1512</span>    <span class="fl">0.7532</span>    <span class="fl">1.0018</span></span>
<span id="cb20-25"><a href="#cb20-25"></a></span>
<span id="cb20-26"><a href="#cb20-26"></a>Concordance=<span class="st"> </span><span class="fl">0.563</span>  (<span class="dt">se =</span> <span class="fl">0.009</span> )</span>
<span id="cb20-27"><a href="#cb20-27"></a>Likelihood ratio test=<span class="st"> </span><span class="fl">56.21</span>  on <span class="dv">4</span> df,   p=<span class="fl">2e-11</span></span>
<span id="cb20-28"><a href="#cb20-28"></a>Wald test            =<span class="st"> </span><span class="fl">56.26</span>  on <span class="dv">4</span> df,   p=<span class="fl">2e-11</span></span>
<span id="cb20-29"><a href="#cb20-29"></a><span class="kw">Score</span> (logrank) test =<span class="st"> </span><span class="fl">56.96</span>  on <span class="dv">4</span> df,   p=<span class="fl">1e-11</span></span>
<span id="cb20-30"><a href="#cb20-30"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb20-31"><a href="#cb20-31"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># check proportional hazards assumption</span></span>
<span id="cb20-32"><a href="#cb20-32"></a><span class="er">&gt;</span><span class="st"> </span>fit.z &lt;-<span class="st"> </span><span class="kw">cox.zph</span>(fit)</span>
<span id="cb20-33"><a href="#cb20-33"></a><span class="op">&gt;</span><span class="st"> </span>fit.z</span>
<span id="cb20-34"><a href="#cb20-34"></a>       chisq df    p</span>
<span id="cb20-35"><a href="#cb20-35"></a>age     <span class="fl">1.41</span>  <span class="dv">1</span> <span class="fl">0.24</span></span>
<span id="cb20-36"><a href="#cb20-36"></a>sex     <span class="fl">1.08</span>  <span class="dv">1</span> <span class="fl">0.30</span></span>
<span id="cb20-37"><a href="#cb20-37"></a>arm     <span class="fl">1.80</span>  <span class="dv">2</span> <span class="fl">0.41</span></span>
<span id="cb20-38"><a href="#cb20-38"></a>GLOBAL  <span class="fl">4.68</span>  <span class="dv">4</span> <span class="fl">0.32</span></span>
<span id="cb20-39"><a href="#cb20-39"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">plot</span>(fit.z[<span class="dv">1</span>], <span class="dt">resid=</span><span class="ot">FALSE</span>) <span class="co"># makes for a cleaner picture in this case</span></span>
<span id="cb20-40"><a href="#cb20-40"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">abline</span>(<span class="dt">h=</span><span class="kw">coef</span>(fit)[<span class="dv">1</span>], <span class="dt">col=</span><span class="st">'red'</span>)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/survival-1.png" width="700"></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># check functional form for age using pspline (penalized spline)</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># results are returned for the linear and non-linear components</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="er">&gt;</span><span class="st"> </span>fit2 &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span><span class="kw">pspline</span>(age) <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, <span class="dt">data=</span>mockstudy)</span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="op">&gt;</span><span class="st"> </span>fit2</span>
<span id="cb21-6"><a href="#cb21-6"></a>Call<span class="op">:</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="kw">coxph</span>(<span class="dt">formula =</span> <span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span><span class="kw">pspline</span>(age) <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="st">    </span>arm, <span class="dt">data =</span> mockstudy)</span>
<span id="cb21-9"><a href="#cb21-9"></a></span>
<span id="cb21-10"><a href="#cb21-10"></a>                         coef <span class="kw">se</span>(coef)      se2    Chisq   DF       p</span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="kw">pspline</span>(age), linear  <span class="fl">0.00443</span>  <span class="fl">0.00237</span>  <span class="fl">0.00237</span>  <span class="fl">3.48989</span> <span class="fl">1.00</span>  <span class="fl">0.0617</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="kw">pspline</span>(age), nonlin                            <span class="fl">13.11270</span> <span class="fl">3.08</span>  <span class="fl">0.0047</span></span>
<span id="cb21-13"><a href="#cb21-13"></a>sexFemale             <span class="fl">0.03993</span>  <span class="fl">0.05610</span>  <span class="fl">0.05607</span>  <span class="fl">0.50663</span> <span class="fl">1.00</span>  <span class="fl">0.4766</span></span>
<span id="cb21-14"><a href="#cb21-14"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX         <span class="fl">-0.46240</span>  <span class="fl">0.06494</span>  <span class="fl">0.06493</span> <span class="fl">50.69608</span> <span class="fl">1.00</span> <span class="fl">1.1e-12</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>armG<span class="op">:</span><span class="st"> </span>IROX           <span class="fl">-0.15243</span>  <span class="fl">0.07301</span>  <span class="fl">0.07299</span>  <span class="fl">4.35876</span> <span class="fl">1.00</span>  <span class="fl">0.0368</span></span>
<span id="cb21-16"><a href="#cb21-16"></a></span>
<span id="cb21-17"><a href="#cb21-17"></a>Iterations<span class="op">:</span><span class="st"> </span><span class="dv">6</span> outer, <span class="dv">16</span> Newton<span class="op">-</span>Raphson</span>
<span id="cb21-18"><a href="#cb21-18"></a>     Theta=<span class="st"> </span><span class="fl">0.954</span> </span>
<span id="cb21-19"><a href="#cb21-19"></a>Degrees of freedom <span class="cf">for</span> terms=<span class="st"> </span><span class="fl">4.1</span> <span class="fl">1.0</span> <span class="fl">2.0</span> </span>
<span id="cb21-20"><a href="#cb21-20"></a>Likelihood ratio test=<span class="fl">70.1</span>  on <span class="fl">7.08</span> df, p=<span class="fl">2e-12</span></span>
<span id="cb21-21"><a href="#cb21-21"></a>n=<span class="st"> </span><span class="dv">1499</span>, number of events=<span class="st"> </span><span class="dv">1356</span> </span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb21-23"><a href="#cb21-23"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># plot smoothed age to visualize why significant</span></span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">termplot</span>(fit2, <span class="dt">se=</span>T, <span class="dt">terms=</span><span class="dv">1</span>)</span>
<span id="cb21-25"><a href="#cb21-25"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">abline</span>(<span class="dt">h=</span><span class="dv">0</span>)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/survival-2.png" width="700"></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># The c-statistic comes out in the summary of the fit</span></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit2)<span class="op">$</span>concordance</span>
<span id="cb22-4"><a href="#cb22-4"></a>          C       <span class="kw">se</span>(C) </span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="fl">0.568432549</span> <span class="fl">0.008487495</span> </span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># It can also be calculated using the survConcordance function</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">survConcordance</span>(<span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span><span class="kw">predict</span>(fit2), <span class="dt">data=</span>mockstudy)</span>
<span id="cb22-9"><a href="#cb22-9"></a>Warning<span class="op">:</span><span class="st"> 'survConcordance'</span> is deprecated.</span>
<span id="cb22-10"><a href="#cb22-10"></a>Use <span class="st">'concordance'</span> instead.</span>
<span id="cb22-11"><a href="#cb22-11"></a>See <span class="kw">help</span>(<span class="st">"Deprecated"</span>)</span>
<span id="cb22-12"><a href="#cb22-12"></a>Warning<span class="op">:</span><span class="st"> 'survConcordance.fit'</span> is deprecated.</span>
<span id="cb22-13"><a href="#cb22-13"></a>Use <span class="st">'concordancefit'</span> instead.</span>
<span id="cb22-14"><a href="#cb22-14"></a>See <span class="kw">help</span>(<span class="st">"Deprecated"</span>)</span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="op">$</span>concordance</span>
<span id="cb22-16"><a href="#cb22-16"></a>concordant </span>
<span id="cb22-17"><a href="#cb22-17"></a> <span class="fl">0.5684325</span> </span>
<span id="cb22-18"><a href="#cb22-18"></a></span>
<span id="cb22-19"><a href="#cb22-19"></a><span class="op">$</span>stats</span>
<span id="cb22-20"><a href="#cb22-20"></a>concordant discordant  tied.risk  tied.time   <span class="kw">std</span>(c<span class="op">-</span>d) </span>
<span id="cb22-21"><a href="#cb22-21"></a> <span class="fl">620221.00</span>  <span class="fl">470282.00</span>    <span class="fl">5021.00</span>     <span class="fl">766.00</span>   <span class="fl">19235.49</span> </span>
<span id="cb22-22"><a href="#cb22-22"></a></span>
<span id="cb22-23"><a href="#cb22-23"></a><span class="op">$</span>n</span>
<span id="cb22-24"><a href="#cb22-24"></a>[<span class="dv">1</span>] <span class="dv">1499</span></span>
<span id="cb22-25"><a href="#cb22-25"></a></span>
<span id="cb22-26"><a href="#cb22-26"></a><span class="op">$</span>std.err</span>
<span id="cb22-27"><a href="#cb22-27"></a>   <span class="kw">std</span>(c<span class="op">-</span>d) </span>
<span id="cb22-28"><a href="#cb22-28"></a><span class="fl">0.008779125</span> </span>
<span id="cb22-29"><a href="#cb22-29"></a></span>
<span id="cb22-30"><a href="#cb22-30"></a><span class="op">$</span>call</span>
<span id="cb22-31"><a href="#cb22-31"></a><span class="kw">survConcordance</span>(<span class="dt">formula =</span> <span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span><span class="kw">predict</span>(fit2), </span>
<span id="cb22-32"><a href="#cb22-32"></a>    <span class="dt">data =</span> mockstudy)</span>
<span id="cb22-33"><a href="#cb22-33"></a></span>
<span id="cb22-34"><a href="#cb22-34"></a><span class="kw">attr</span>(,<span class="st">"class"</span>)</span>
<span id="cb22-35"><a href="#cb22-35"></a>[<span class="dv">1</span>] <span class="st">"survConcordance"</span></span></code></pre></div>
</div>
<div id="extract-data-using-broom-package-1" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package-1" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tidy</span>(fit) <span class="co"># coefficients, p-values</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co"># A tibble: 4 x 5</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  term         estimate std.error statistic  p.value</span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">           </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="dv">1</span> age           <span class="fl">0.00460</span>   <span class="fl">0.00250</span>     <span class="fl">1.84</span>  <span class="fl">6.59</span>e<span class="op">-</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="dv">2</span> sexFemale     <span class="fl">0.0399</span>    <span class="fl">0.0560</span>      <span class="fl">0.712</span> <span class="fl">4.77</span>e<span class="op">-</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="dv">3</span> armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-0.455</span>     <span class="fl">0.0649</span>     <span class="fl">-7.01</span>  <span class="fl">2.42e-12</span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="dv">4</span> armG<span class="op">:</span><span class="st"> </span>IROX   <span class="fl">-0.141</span>     <span class="fl">0.0728</span>     <span class="fl">-1.93</span>  <span class="fl">5.30</span>e<span class="op">-</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">glance</span>(fit) <span class="co"># model summary statistics</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="co"># A tibble: 1 x 18</span></span>
<span id="cb23-12"><a href="#cb23-12"></a>      n nevent statistic.log p.value.log statistic.sc p.value.sc statistic.wald</span>
<span id="cb23-13"><a href="#cb23-13"></a>  <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="dv">1</span>  <span class="dv">1499</span>   <span class="dv">1356</span>          <span class="fl">56.2</span>    <span class="fl">1.81e-11</span>         <span class="fl">57.0</span>   <span class="fl">1.26e-11</span>           <span class="fl">56.3</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="co"># … with 11 more variables: p.value.wald &lt;dbl&gt;, statistic.robust &lt;dbl&gt;,</span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="co">#   p.value.robust &lt;dbl&gt;, r.squared &lt;dbl&gt;, r.squared.max &lt;dbl&gt;,</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="co">#   concordance &lt;dbl&gt;, std.error.concordance &lt;dbl&gt;, logLik &lt;dbl&gt;, AIC &lt;dbl&gt;,</span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="co">#   BIC &lt;dbl&gt;, nobs &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="create-a-summary-table-using-modelsum-2" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-2" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">##Note: You must use quotes when specifying family="survival" </span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">##      family=survival will not work</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(<span class="kw">Surv</span>(fu.time, fu.stat) <span class="op">~</span><span class="st"> </span>arm, </span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="op">+</span><span class="st">                  </span><span class="dt">adjust=</span><span class="op">~</span>age <span class="op">+</span><span class="st"> </span>sex, <span class="dt">data=</span>mockstudy, <span class="dt">family=</span><span class="st">"survival"</span>))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">HR</th>
<th align="left">CI.lower.HR</th>
<th align="left">CI.upper.HR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.635</td>
<td align="left">0.559</td>
<td align="left">0.721</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.563</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.869</td>
<td align="left">0.753</td>
<td align="left">1.002</td>
<td align="left">0.053</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">1.005</td>
<td align="left">1.000</td>
<td align="left">1.010</td>
<td align="left">0.066</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.041</td>
<td align="left">0.932</td>
<td align="left">1.162</td>
<td align="left">0.477</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">##Note: the pspline term is not working yet</span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">#summary(modelsum(Surv(fu.time, fu.stat) ~ arm, </span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">#                adjust=~pspline(age) + sex, data=mockstudy, family='survival'))</span></span></code></pre></div>
</div>
</div>
<div id="poisson" class="section level2">
<h2 class="hasAnchor">
<a href="#poisson" class="anchor"></a>Poisson</h2>
<p>Poisson regression is useful when predicting an outcome variable representing counts. It can also be useful when looking at survival data. Cox models and Poisson models are very closely related and survival data can be summarized using Poisson regression. If you have overdispersion (see if the residual deviance is much larger than degrees of freedom), you may want to use <code><a href="https://rdrr.io/r/stats/family.html">quasipoisson()</a></code> instead of <code><a href="https://rdrr.io/r/stats/family.html">poisson()</a></code>. Some of these diagnostics need to be done outside of <code>modelsum</code>.</p>
<div id="example-1-fit-and-summarize-a-poisson-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-fit-and-summarize-a-poisson-regression-model" class="anchor"></a>Example 1: fit and summarize a Poisson regression model</h3>
<p>For the first example, use the solder dataset available in the <code>rpart</code> package. The endpoint <code>skips</code> has a definite Poisson look.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">require</span>(rpart) <span class="co">##just to get access to solder dataset</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(solder)</span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">hist</span>(solder<span class="op">$</span>skips)</span></code></pre></div>
<p><img src="modelsum_files/figure-html/poisson-1.png" width="700"></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="er">&gt;</span><span class="st"> </span>fit &lt;-<span class="st"> </span><span class="kw">glm</span>(skips <span class="op">~</span><span class="st"> </span>Opening <span class="op">+</span><span class="st"> </span>Solder <span class="op">+</span><span class="st"> </span>Mask , <span class="dt">data=</span>solder, <span class="dt">family=</span>poisson)</span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="op">&gt;</span><span class="st"> </span>stats<span class="op">::</span><span class="kw">anova</span>(fit, <span class="dt">test=</span><span class="st">'Chi'</span>)</span>
<span id="cb27-4"><a href="#cb27-4"></a>Analysis of Deviance Table</span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a>Model<span class="op">:</span><span class="st"> </span>poisson, link<span class="op">:</span><span class="st"> </span>log</span>
<span id="cb27-7"><a href="#cb27-7"></a></span>
<span id="cb27-8"><a href="#cb27-8"></a>Response<span class="op">:</span><span class="st"> </span>skips</span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a>Terms added <span class="kw">sequentially</span> (first to last)</span>
<span id="cb27-11"><a href="#cb27-11"></a></span>
<span id="cb27-12"><a href="#cb27-12"></a>        Df Deviance Resid. Df Resid. Dev  <span class="kw">Pr</span>(<span class="op">&gt;</span>Chi)    </span>
<span id="cb27-13"><a href="#cb27-13"></a><span class="ot">NULL</span>                      <span class="dv">899</span>     <span class="fl">8788.2</span>              </span>
<span id="cb27-14"><a href="#cb27-14"></a>Opening  <span class="dv">2</span>   <span class="fl">2920.5</span>       <span class="dv">897</span>     <span class="fl">5867.7</span> <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-15"><a href="#cb27-15"></a>Solder   <span class="dv">1</span>   <span class="fl">1168.4</span>       <span class="dv">896</span>     <span class="fl">4699.3</span> <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-16"><a href="#cb27-16"></a>Mask     <span class="dv">4</span>   <span class="fl">2015.7</span>       <span class="dv">892</span>     <span class="fl">2683.7</span> <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-17"><a href="#cb27-17"></a><span class="op">---</span></span>
<span id="cb27-18"><a href="#cb27-18"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb27-19"><a href="#cb27-19"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit)</span>
<span id="cb27-20"><a href="#cb27-20"></a></span>
<span id="cb27-21"><a href="#cb27-21"></a>Call<span class="op">:</span></span>
<span id="cb27-22"><a href="#cb27-22"></a><span class="kw">glm</span>(<span class="dt">formula =</span> skips <span class="op">~</span><span class="st"> </span>Opening <span class="op">+</span><span class="st"> </span>Solder <span class="op">+</span><span class="st"> </span>Mask, <span class="dt">family =</span> poisson, </span>
<span id="cb27-23"><a href="#cb27-23"></a>    <span class="dt">data =</span> solder)</span>
<span id="cb27-24"><a href="#cb27-24"></a></span>
<span id="cb27-25"><a href="#cb27-25"></a>Deviance Residuals<span class="op">:</span><span class="st"> </span></span>
<span id="cb27-26"><a href="#cb27-26"></a><span class="st">    </span>Min       1Q   Median       3Q      Max  </span>
<span id="cb27-27"><a href="#cb27-27"></a><span class="fl">-6.1251</span>  <span class="fl">-1.4720</span>  <span class="fl">-0.7826</span>   <span class="fl">0.5986</span>   <span class="fl">6.6031</span>  </span>
<span id="cb27-28"><a href="#cb27-28"></a></span>
<span id="cb27-29"><a href="#cb27-29"></a>Coefficients<span class="op">:</span></span>
<span id="cb27-30"><a href="#cb27-30"></a><span class="st">            </span>Estimate Std. Error z value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>z<span class="op">|</span>)    </span>
<span id="cb27-31"><a href="#cb27-31"></a>(Intercept) <span class="fl">-1.12220</span>    <span class="fl">0.07742</span>  <span class="fl">-14.50</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-32"><a href="#cb27-32"></a>OpeningM     <span class="fl">0.57161</span>    <span class="fl">0.05707</span>   <span class="fl">10.02</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-33"><a href="#cb27-33"></a>OpeningS     <span class="fl">1.81475</span>    <span class="fl">0.05044</span>   <span class="fl">35.98</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-34"><a href="#cb27-34"></a>SolderThin   <span class="fl">0.84682</span>    <span class="fl">0.03327</span>   <span class="fl">25.45</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-35"><a href="#cb27-35"></a>MaskA3       <span class="fl">0.51315</span>    <span class="fl">0.07098</span>    <span class="fl">7.23</span> <span class="fl">4.83e-13</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-36"><a href="#cb27-36"></a>MaskA6       <span class="fl">1.81103</span>    <span class="fl">0.06609</span>   <span class="fl">27.40</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-37"><a href="#cb27-37"></a>MaskB3       <span class="fl">1.20225</span>    <span class="fl">0.06697</span>   <span class="fl">17.95</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-38"><a href="#cb27-38"></a>MaskB6       <span class="fl">1.86648</span>    <span class="fl">0.06310</span>   <span class="fl">29.58</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb27-39"><a href="#cb27-39"></a><span class="op">---</span></span>
<span id="cb27-40"><a href="#cb27-40"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb27-41"><a href="#cb27-41"></a></span>
<span id="cb27-42"><a href="#cb27-42"></a>(Dispersion parameter <span class="cf">for</span> poisson family taken to be <span class="dv">1</span>)</span>
<span id="cb27-43"><a href="#cb27-43"></a></span>
<span id="cb27-44"><a href="#cb27-44"></a>    Null deviance<span class="op">:</span><span class="st"> </span><span class="fl">8788.2</span>  on <span class="dv">899</span>  degrees of freedom</span>
<span id="cb27-45"><a href="#cb27-45"></a>Residual deviance<span class="op">:</span><span class="st"> </span><span class="fl">2683.7</span>  on <span class="dv">892</span>  degrees of freedom</span>
<span id="cb27-46"><a href="#cb27-46"></a>AIC<span class="op">:</span><span class="st"> </span><span class="fl">4802.2</span></span>
<span id="cb27-47"><a href="#cb27-47"></a></span>
<span id="cb27-48"><a href="#cb27-48"></a>Number of Fisher Scoring iterations<span class="op">:</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<p>Overdispersion is when the Residual deviance is larger than the degrees of freedom. This can be tested, approximately using the following code. The goal is to have a p-value that is <span class="math inline">\(&gt;0.05\)</span>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">-</span><span class="kw">pchisq</span>(fit<span class="op">$</span>deviance, fit<span class="op">$</span>df.residual)</span>
<span id="cb28-2"><a href="#cb28-2"></a>[<span class="dv">1</span>] <span class="dv">0</span></span></code></pre></div>
<p>One possible solution is to use the quasipoisson family instead of the poisson family. This adjusts for the overdispersion.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="op">&gt;</span><span class="st"> </span>fit2 &lt;-<span class="st"> </span><span class="kw">glm</span>(skips <span class="op">~</span><span class="st"> </span>Opening <span class="op">+</span><span class="st"> </span>Solder <span class="op">+</span><span class="st"> </span>Mask, <span class="dt">data=</span>solder, <span class="dt">family=</span>quasipoisson)</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit2)</span>
<span id="cb29-3"><a href="#cb29-3"></a></span>
<span id="cb29-4"><a href="#cb29-4"></a>Call<span class="op">:</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="kw">glm</span>(<span class="dt">formula =</span> skips <span class="op">~</span><span class="st"> </span>Opening <span class="op">+</span><span class="st"> </span>Solder <span class="op">+</span><span class="st"> </span>Mask, <span class="dt">family =</span> quasipoisson, </span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="dt">data =</span> solder)</span>
<span id="cb29-7"><a href="#cb29-7"></a></span>
<span id="cb29-8"><a href="#cb29-8"></a>Deviance Residuals<span class="op">:</span><span class="st"> </span></span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="st">    </span>Min       1Q   Median       3Q      Max  </span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="fl">-6.1251</span>  <span class="fl">-1.4720</span>  <span class="fl">-0.7826</span>   <span class="fl">0.5986</span>   <span class="fl">6.6031</span>  </span>
<span id="cb29-11"><a href="#cb29-11"></a></span>
<span id="cb29-12"><a href="#cb29-12"></a>Coefficients<span class="op">:</span></span>
<span id="cb29-13"><a href="#cb29-13"></a><span class="st">            </span>Estimate Std. Error t value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>t<span class="op">|</span>)    </span>
<span id="cb29-14"><a href="#cb29-14"></a>(Intercept) <span class="fl">-1.12220</span>    <span class="fl">0.13483</span>  <span class="fl">-8.323</span> <span class="fl">3.19e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-15"><a href="#cb29-15"></a>OpeningM     <span class="fl">0.57161</span>    <span class="fl">0.09939</span>   <span class="fl">5.751</span> <span class="fl">1.22e-08</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-16"><a href="#cb29-16"></a>OpeningS     <span class="fl">1.81475</span>    <span class="fl">0.08784</span>  <span class="fl">20.660</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-17"><a href="#cb29-17"></a>SolderThin   <span class="fl">0.84682</span>    <span class="fl">0.05794</span>  <span class="fl">14.615</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-18"><a href="#cb29-18"></a>MaskA3       <span class="fl">0.51315</span>    <span class="fl">0.12361</span>   <span class="fl">4.151</span> <span class="fl">3.62e-05</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-19"><a href="#cb29-19"></a>MaskA6       <span class="fl">1.81103</span>    <span class="fl">0.11510</span>  <span class="fl">15.735</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-20"><a href="#cb29-20"></a>MaskB3       <span class="fl">1.20225</span>    <span class="fl">0.11663</span>  <span class="fl">10.308</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-21"><a href="#cb29-21"></a>MaskB6       <span class="fl">1.86648</span>    <span class="fl">0.10989</span>  <span class="fl">16.984</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb29-22"><a href="#cb29-22"></a><span class="op">---</span></span>
<span id="cb29-23"><a href="#cb29-23"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb29-24"><a href="#cb29-24"></a></span>
<span id="cb29-25"><a href="#cb29-25"></a>(Dispersion parameter <span class="cf">for</span> quasipoisson family taken to be <span class="fl">3.033198</span>)</span>
<span id="cb29-26"><a href="#cb29-26"></a></span>
<span id="cb29-27"><a href="#cb29-27"></a>    Null deviance<span class="op">:</span><span class="st"> </span><span class="fl">8788.2</span>  on <span class="dv">899</span>  degrees of freedom</span>
<span id="cb29-28"><a href="#cb29-28"></a>Residual deviance<span class="op">:</span><span class="st"> </span><span class="fl">2683.7</span>  on <span class="dv">892</span>  degrees of freedom</span>
<span id="cb29-29"><a href="#cb29-29"></a>AIC<span class="op">:</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb29-30"><a href="#cb29-30"></a></span>
<span id="cb29-31"><a href="#cb29-31"></a>Number of Fisher Scoring iterations<span class="op">:</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
</div>
<div id="extract-data-using-broom-package-2" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package-2" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tidy</span>(fit) <span class="co"># coefficients, p-values</span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="co"># A tibble: 8 x 5</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>  term        estimate std.error statistic   p.value</span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="dv">1</span> (Intercept)   <span class="fl">-1.12</span>     <span class="fl">0.0774</span>    <span class="fl">-14.5</span>  <span class="fl">1.29</span>e<span class="op">-</span><span class="st"> </span><span class="dv">47</span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="dv">2</span> OpeningM       <span class="fl">0.572</span>    <span class="fl">0.0571</span>     <span class="fl">10.0</span>  <span class="fl">1.29</span>e<span class="op">-</span><span class="st"> </span><span class="dv">23</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="dv">3</span> OpeningS       <span class="fl">1.81</span>     <span class="fl">0.0504</span>     <span class="fl">36.0</span>  <span class="fl">1.66e-283</span></span>
<span id="cb30-8"><a href="#cb30-8"></a><span class="dv">4</span> SolderThin     <span class="fl">0.847</span>    <span class="fl">0.0333</span>     <span class="fl">25.5</span>  <span class="fl">6.47e-143</span></span>
<span id="cb30-9"><a href="#cb30-9"></a><span class="dv">5</span> MaskA3         <span class="fl">0.513</span>    <span class="fl">0.0710</span>      <span class="fl">7.23</span> <span class="fl">4.83</span>e<span class="op">-</span><span class="st"> </span><span class="dv">13</span></span>
<span id="cb30-10"><a href="#cb30-10"></a><span class="dv">6</span> MaskA6         <span class="fl">1.81</span>     <span class="fl">0.0661</span>     <span class="fl">27.4</span>  <span class="fl">2.45e-165</span></span>
<span id="cb30-11"><a href="#cb30-11"></a><span class="dv">7</span> MaskB3         <span class="fl">1.20</span>     <span class="fl">0.0670</span>     <span class="fl">18.0</span>  <span class="fl">4.55</span>e<span class="op">-</span><span class="st"> </span><span class="dv">72</span></span>
<span id="cb30-12"><a href="#cb30-12"></a><span class="dv">8</span> MaskB6         <span class="fl">1.87</span>     <span class="fl">0.0631</span>     <span class="fl">29.6</span>  <span class="fl">2.71e-192</span></span>
<span id="cb30-13"><a href="#cb30-13"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb30-14"><a href="#cb30-14"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">glance</span>(fit) <span class="co"># model summary statistics</span></span>
<span id="cb30-15"><a href="#cb30-15"></a><span class="co"># A tibble: 1 x 8</span></span>
<span id="cb30-16"><a href="#cb30-16"></a>  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs</span>
<span id="cb30-17"><a href="#cb30-17"></a>          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb30-18"><a href="#cb30-18"></a><span class="dv">1</span>         <span class="fl">8788.</span>     <span class="dv">899</span> <span class="fl">-2393.</span> <span class="fl">4802.</span> <span class="fl">4841.</span>    <span class="fl">2684.</span>         <span class="dv">892</span>   <span class="dv">900</span></span></code></pre></div>
</div>
<div id="create-a-summary-table-using-modelsum-3" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-3" class="anchor"></a>Create a summary table using modelsum</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(skips<span class="op">~</span>Opening <span class="op">+</span><span class="st"> </span>Solder <span class="op">+</span><span class="st"> </span>Mask, <span class="dt">data=</span>solder, <span class="dt">family=</span><span class="st">"quasipoisson"</span>))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">RR</th>
<th align="left">CI.lower.RR</th>
<th align="left">CI.upper.RR</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.533</td>
<td align="left">1.179</td>
<td align="left">1.952</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Opening M</strong></td>
<td align="left">2.328</td>
<td align="left">1.733</td>
<td align="left">3.167</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Opening S</strong></td>
<td align="left">7.491</td>
<td align="left">5.780</td>
<td align="left">9.888</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">2.904</td>
<td align="left">2.423</td>
<td align="left">3.446</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Solder Thin</strong></td>
<td align="left">2.808</td>
<td align="left">2.295</td>
<td align="left">3.458</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">1.611</td>
<td align="left">1.135</td>
<td align="left">2.204</td>
<td align="left">0.005</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask A3</strong></td>
<td align="left">1.469</td>
<td align="left">0.995</td>
<td align="left">2.214</td>
<td align="left">0.059</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask A6</strong></td>
<td align="left">8.331</td>
<td align="left">5.839</td>
<td align="left">12.222</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask B3</strong></td>
<td align="left">3.328</td>
<td align="left">2.309</td>
<td align="left">4.920</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask B6</strong></td>
<td align="left">6.466</td>
<td align="left">4.598</td>
<td align="left">9.378</td>
<td align="left">&lt; 0.001</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(skips<span class="op">~</span>Opening <span class="op">+</span><span class="st"> </span>Solder <span class="op">+</span><span class="st"> </span>Mask, <span class="dt">data=</span>solder, <span class="dt">family=</span><span class="st">"poisson"</span>))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">RR</th>
<th align="left">CI.lower.RR</th>
<th align="left">CI.upper.RR</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.533</td>
<td align="left">1.397</td>
<td align="left">1.678</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Opening M</strong></td>
<td align="left">2.328</td>
<td align="left">2.089</td>
<td align="left">2.599</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Opening S</strong></td>
<td align="left">7.491</td>
<td align="left">6.805</td>
<td align="left">8.267</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">2.904</td>
<td align="left">2.750</td>
<td align="left">3.065</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Solder Thin</strong></td>
<td align="left">2.808</td>
<td align="left">2.637</td>
<td align="left">2.992</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">1.611</td>
<td align="left">1.433</td>
<td align="left">1.804</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask A3</strong></td>
<td align="left">1.469</td>
<td align="left">1.280</td>
<td align="left">1.690</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask A6</strong></td>
<td align="left">8.331</td>
<td align="left">7.341</td>
<td align="left">9.487</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Mask B3</strong></td>
<td align="left">3.328</td>
<td align="left">2.923</td>
<td align="left">3.800</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Mask B6</strong></td>
<td align="left">6.466</td>
<td align="left">5.724</td>
<td align="left">7.331</td>
<td align="left">&lt; 0.001</td>
</tr>
</tbody>
</table>
</div>
<div id="example-2-fit-and-summarize-a-poisson-regression-model" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-fit-and-summarize-a-poisson-regression-model" class="anchor"></a>Example 2: fit and summarize a Poisson regression model</h3>
<p>This second example uses the survival endpoint available in the <code>mockstudy</code> dataset. There is a close relationship between survival and Poisson models, and often it is easier to fit the model using Poisson regression, especially if you want to present absolute risk.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># add .01 to the follow-up time (.01*1 day) in order to keep everyone in the analysis</span></span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="er">&gt;</span><span class="st"> </span>fit &lt;-<span class="st"> </span><span class="kw">glm</span>(fu.stat <span class="op">~</span><span class="st"> </span><span class="kw">offset</span>(<span class="kw">log</span>(fu.time<span class="fl">+.01</span>)) <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, <span class="dt">data=</span>mockstudy, <span class="dt">family=</span>poisson)</span>
<span id="cb33-3"><a href="#cb33-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit)</span>
<span id="cb33-4"><a href="#cb33-4"></a></span>
<span id="cb33-5"><a href="#cb33-5"></a>Call<span class="op">:</span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="kw">glm</span>(<span class="dt">formula =</span> fu.stat <span class="op">~</span><span class="st"> </span><span class="kw">offset</span>(<span class="kw">log</span>(fu.time <span class="op">+</span><span class="st"> </span><span class="fl">0.01</span>)) <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span></span>
<span id="cb33-7"><a href="#cb33-7"></a><span class="st">    </span>arm, <span class="dt">family =</span> poisson, <span class="dt">data =</span> mockstudy)</span>
<span id="cb33-8"><a href="#cb33-8"></a></span>
<span id="cb33-9"><a href="#cb33-9"></a>Deviance Residuals<span class="op">:</span><span class="st"> </span></span>
<span id="cb33-10"><a href="#cb33-10"></a><span class="st">    </span>Min       1Q   Median       3Q      Max  </span>
<span id="cb33-11"><a href="#cb33-11"></a><span class="fl">-3.1188</span>  <span class="fl">-0.4041</span>   <span class="fl">0.3242</span>   <span class="fl">0.9727</span>   <span class="fl">4.3588</span>  </span>
<span id="cb33-12"><a href="#cb33-12"></a></span>
<span id="cb33-13"><a href="#cb33-13"></a>Coefficients<span class="op">:</span></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="st">              </span>Estimate Std. Error z value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>z<span class="op">|</span>)    </span>
<span id="cb33-15"><a href="#cb33-15"></a>(Intercept)  <span class="fl">-5.875627</span>   <span class="fl">0.108984</span> <span class="fl">-53.913</span>  <span class="op">&lt;</span><span class="st"> </span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb33-16"><a href="#cb33-16"></a>age           <span class="fl">0.003724</span>   <span class="fl">0.001705</span>   <span class="fl">2.184</span>   <span class="fl">0.0290</span> <span class="op">*</span><span class="st">  </span></span>
<span id="cb33-17"><a href="#cb33-17"></a>sexFemale     <span class="fl">0.027321</span>   <span class="fl">0.038575</span>   <span class="fl">0.708</span>   <span class="fl">0.4788</span>    </span>
<span id="cb33-18"><a href="#cb33-18"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-0.335141</span>   <span class="fl">0.044600</span>  <span class="fl">-7.514</span> <span class="fl">5.72e-14</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb33-19"><a href="#cb33-19"></a>armG<span class="op">:</span><span class="st"> </span>IROX   <span class="fl">-0.107776</span>   <span class="fl">0.050643</span>  <span class="fl">-2.128</span>   <span class="fl">0.0333</span> <span class="op">*</span><span class="st">  </span></span>
<span id="cb33-20"><a href="#cb33-20"></a><span class="op">---</span></span>
<span id="cb33-21"><a href="#cb33-21"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb33-22"><a href="#cb33-22"></a></span>
<span id="cb33-23"><a href="#cb33-23"></a>(Dispersion parameter <span class="cf">for</span> poisson family taken to be <span class="dv">1</span>)</span>
<span id="cb33-24"><a href="#cb33-24"></a></span>
<span id="cb33-25"><a href="#cb33-25"></a>    Null deviance<span class="op">:</span><span class="st"> </span><span class="fl">2113.5</span>  on <span class="dv">1498</span>  degrees of freedom</span>
<span id="cb33-26"><a href="#cb33-26"></a>Residual deviance<span class="op">:</span><span class="st"> </span><span class="fl">2048.0</span>  on <span class="dv">1494</span>  degrees of freedom</span>
<span id="cb33-27"><a href="#cb33-27"></a>AIC<span class="op">:</span><span class="st"> </span><span class="fl">5888.2</span></span>
<span id="cb33-28"><a href="#cb33-28"></a></span>
<span id="cb33-29"><a href="#cb33-29"></a>Number of Fisher Scoring iterations<span class="op">:</span><span class="st"> </span><span class="dv">5</span></span>
<span id="cb33-30"><a href="#cb33-30"></a><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">-</span><span class="kw">pchisq</span>(fit<span class="op">$</span>deviance, fit<span class="op">$</span>df.residual)</span>
<span id="cb33-31"><a href="#cb33-31"></a>[<span class="dv">1</span>] <span class="dv">0</span></span>
<span id="cb33-32"><a href="#cb33-32"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb33-33"><a href="#cb33-33"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">coef</span>(<span class="kw">coxph</span>(<span class="kw">Surv</span>(fu.time,fu.stat) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, <span class="dt">data=</span>mockstudy))</span>
<span id="cb33-34"><a href="#cb33-34"></a>         age    sexFemale armF<span class="op">:</span><span class="st"> </span>FOLFOX   armG<span class="op">:</span><span class="st"> </span>IROX </span>
<span id="cb33-35"><a href="#cb33-35"></a> <span class="fl">0.004600011</span>  <span class="fl">0.039892735</span> <span class="fl">-0.454650445</span> <span class="fl">-0.140784996</span> </span>
<span id="cb33-36"><a href="#cb33-36"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">coef</span>(fit)[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb33-37"><a href="#cb33-37"></a>         age    sexFemale armF<span class="op">:</span><span class="st"> </span>FOLFOX   armG<span class="op">:</span><span class="st"> </span>IROX </span>
<span id="cb33-38"><a href="#cb33-38"></a> <span class="fl">0.003723763</span>  <span class="fl">0.027320917</span> <span class="fl">-0.335141090</span> <span class="fl">-0.107775577</span> </span>
<span id="cb33-39"><a href="#cb33-39"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb33-40"><a href="#cb33-40"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># results from the Poisson model can then be described as risk ratios (similar to the hazard ratio)</span></span>
<span id="cb33-41"><a href="#cb33-41"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">coef</span>(fit)[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb33-42"><a href="#cb33-42"></a>         age    sexFemale armF<span class="op">:</span><span class="st"> </span>FOLFOX   armG<span class="op">:</span><span class="st"> </span>IROX </span>
<span id="cb33-43"><a href="#cb33-43"></a>   <span class="fl">1.0037307</span>    <span class="fl">1.0276976</span>    <span class="fl">0.7152372</span>    <span class="fl">0.8978291</span> </span>
<span id="cb33-44"><a href="#cb33-44"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb33-45"><a href="#cb33-45"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># As before, we can model the dispersion which alters the standard error</span></span>
<span id="cb33-46"><a href="#cb33-46"></a><span class="er">&gt;</span><span class="st"> </span>fit2 &lt;-<span class="st"> </span><span class="kw">glm</span>(fu.stat <span class="op">~</span><span class="st"> </span><span class="kw">offset</span>(<span class="kw">log</span>(fu.time<span class="fl">+.01</span>)) <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, </span>
<span id="cb33-47"><a href="#cb33-47"></a><span class="op">+</span><span class="st">             </span><span class="dt">data=</span>mockstudy, <span class="dt">family=</span>quasipoisson)</span>
<span id="cb33-48"><a href="#cb33-48"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(fit2)</span>
<span id="cb33-49"><a href="#cb33-49"></a></span>
<span id="cb33-50"><a href="#cb33-50"></a>Call<span class="op">:</span></span>
<span id="cb33-51"><a href="#cb33-51"></a><span class="kw">glm</span>(<span class="dt">formula =</span> fu.stat <span class="op">~</span><span class="st"> </span><span class="kw">offset</span>(<span class="kw">log</span>(fu.time <span class="op">+</span><span class="st"> </span><span class="fl">0.01</span>)) <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span></span>
<span id="cb33-52"><a href="#cb33-52"></a><span class="st">    </span>arm, <span class="dt">family =</span> quasipoisson, <span class="dt">data =</span> mockstudy)</span>
<span id="cb33-53"><a href="#cb33-53"></a></span>
<span id="cb33-54"><a href="#cb33-54"></a>Deviance Residuals<span class="op">:</span><span class="st"> </span></span>
<span id="cb33-55"><a href="#cb33-55"></a><span class="st">    </span>Min       1Q   Median       3Q      Max  </span>
<span id="cb33-56"><a href="#cb33-56"></a><span class="fl">-3.1188</span>  <span class="fl">-0.4041</span>   <span class="fl">0.3242</span>   <span class="fl">0.9727</span>   <span class="fl">4.3588</span>  </span>
<span id="cb33-57"><a href="#cb33-57"></a></span>
<span id="cb33-58"><a href="#cb33-58"></a>Coefficients<span class="op">:</span></span>
<span id="cb33-59"><a href="#cb33-59"></a><span class="st">              </span>Estimate Std. Error t value <span class="kw">Pr</span>(<span class="op">&gt;</span><span class="er">|</span>t<span class="op">|</span>)    </span>
<span id="cb33-60"><a href="#cb33-60"></a>(Intercept)  <span class="fl">-5.875627</span>   <span class="fl">0.566666</span> <span class="fl">-10.369</span>   <span class="op">&lt;</span><span class="fl">2e-16</span> <span class="op">**</span><span class="er">*</span></span>
<span id="cb33-61"><a href="#cb33-61"></a>age           <span class="fl">0.003724</span>   <span class="fl">0.008867</span>   <span class="fl">0.420</span>    <span class="fl">0.675</span>    </span>
<span id="cb33-62"><a href="#cb33-62"></a>sexFemale     <span class="fl">0.027321</span>   <span class="fl">0.200572</span>   <span class="fl">0.136</span>    <span class="fl">0.892</span>    </span>
<span id="cb33-63"><a href="#cb33-63"></a>armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-0.335141</span>   <span class="fl">0.231899</span>  <span class="fl">-1.445</span>    <span class="fl">0.149</span>    </span>
<span id="cb33-64"><a href="#cb33-64"></a>armG<span class="op">:</span><span class="st"> </span>IROX   <span class="fl">-0.107776</span>   <span class="fl">0.263318</span>  <span class="fl">-0.409</span>    <span class="fl">0.682</span>    </span>
<span id="cb33-65"><a href="#cb33-65"></a><span class="op">---</span></span>
<span id="cb33-66"><a href="#cb33-66"></a>Signif. codes<span class="op">:</span><span class="st">  </span><span class="dv">0</span> <span class="st">'***'</span> <span class="fl">0.001</span> <span class="st">'**'</span> <span class="fl">0.01</span> <span class="st">'*'</span> <span class="fl">0.05</span> <span class="st">'.'</span> <span class="fl">0.1</span> <span class="st">' '</span> <span class="dv">1</span></span>
<span id="cb33-67"><a href="#cb33-67"></a></span>
<span id="cb33-68"><a href="#cb33-68"></a>(Dispersion parameter <span class="cf">for</span> quasipoisson family taken to be <span class="fl">27.03493</span>)</span>
<span id="cb33-69"><a href="#cb33-69"></a></span>
<span id="cb33-70"><a href="#cb33-70"></a>    Null deviance<span class="op">:</span><span class="st"> </span><span class="fl">2113.5</span>  on <span class="dv">1498</span>  degrees of freedom</span>
<span id="cb33-71"><a href="#cb33-71"></a>Residual deviance<span class="op">:</span><span class="st"> </span><span class="fl">2048.0</span>  on <span class="dv">1494</span>  degrees of freedom</span>
<span id="cb33-72"><a href="#cb33-72"></a>AIC<span class="op">:</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb33-73"><a href="#cb33-73"></a></span>
<span id="cb33-74"><a href="#cb33-74"></a>Number of Fisher Scoring iterations<span class="op">:</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
</div>
<div id="extract-data-using-broom-package-3" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-using-broom-package-3" class="anchor"></a>Extract data using <code>broom</code> package</h3>
<p>The <code>broom</code> package makes it easy to extract information from the fit.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tidy</span>(fit) <span class="co">##coefficients, p-values</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="co"># A tibble: 5 x 5</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  term         estimate std.error statistic  p.value</span>
<span id="cb34-4"><a href="#cb34-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">           </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="dv">1</span> (Intercept)  <span class="fl">-5.88</span>      <span class="fl">0.109</span>     <span class="fl">-53.9</span>   <span class="fl">0.</span>      </span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="dv">2</span> age           <span class="fl">0.00372</span>   <span class="fl">0.00171</span>     <span class="fl">2.18</span>  <span class="fl">2.90</span>e<span class="op">-</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb34-7"><a href="#cb34-7"></a><span class="dv">3</span> sexFemale     <span class="fl">0.0273</span>    <span class="fl">0.0386</span>      <span class="fl">0.708</span> <span class="fl">4.79</span>e<span class="op">-</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb34-8"><a href="#cb34-8"></a><span class="dv">4</span> armF<span class="op">:</span><span class="st"> </span>FOLFOX <span class="fl">-0.335</span>     <span class="fl">0.0446</span>     <span class="fl">-7.51</span>  <span class="fl">5.72e-14</span></span>
<span id="cb34-9"><a href="#cb34-9"></a><span class="dv">5</span> armG<span class="op">:</span><span class="st"> </span>IROX   <span class="fl">-0.108</span>     <span class="fl">0.0506</span>     <span class="fl">-2.13</span>  <span class="fl">3.33</span>e<span class="op">-</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb34-10"><a href="#cb34-10"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb34-11"><a href="#cb34-11"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">glance</span>(fit) <span class="co">##model summary statistics</span></span>
<span id="cb34-12"><a href="#cb34-12"></a><span class="co"># A tibble: 1 x 8</span></span>
<span id="cb34-13"><a href="#cb34-13"></a>  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs</span>
<span id="cb34-14"><a href="#cb34-14"></a>          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb34-15"><a href="#cb34-15"></a><span class="dv">1</span>         <span class="fl">2114.</span>    <span class="dv">1498</span> <span class="fl">-2939.</span> <span class="fl">5888.</span> <span class="fl">5915.</span>    <span class="fl">2048.</span>        <span class="dv">1494</span>  <span class="dv">1499</span></span></code></pre></div>
</div>
<div id="create-a-summary-table-using-modelsum-4" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-summary-table-using-modelsum-4" class="anchor"></a>Create a summary table using <code>modelsum</code>
</h3>
<p>Remember that the result from <code>modelsum</code> is different from the <code>fit</code> above. The <code>modelsum</code> summary shows the results for <code>age + offset(log(fu.time+.01))</code> then <code>sex + offset(log(fu.time+.01))</code> instead of <code>age + sex + arm + offset(log(fu.time+.01))</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(fu.stat <span class="op">~</span><span class="st"> </span>age, <span class="dt">adjust=</span><span class="op">~</span><span class="kw">offset</span>(<span class="kw">log</span>(fu.time<span class="fl">+.01</span>))<span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>arm, </span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="op">+</span><span class="st">                  </span><span class="dt">data=</span>mockstudy, <span class="dt">family=</span>poisson))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">RR</th>
<th align="left">CI.lower.RR</th>
<th align="left">CI.upper.RR</th>
<th align="left">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.003</td>
<td align="left">0.002</td>
<td align="left">0.003</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">1.004</td>
<td align="left">1.000</td>
<td align="left">1.007</td>
<td align="left">0.029</td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">1.028</td>
<td align="left">0.953</td>
<td align="left">1.108</td>
<td align="left">0.479</td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.715</td>
<td align="left">0.656</td>
<td align="left">0.781</td>
<td align="left">&lt; 0.001</td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.898</td>
<td align="left">0.813</td>
<td align="left">0.991</td>
<td align="left">0.033</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="additional-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#additional-examples" class="anchor"></a>Additional Examples</h1>
<p>Here are multiple examples showing how to use some of the different options.</p>
<div id="change-summary-statistics-globally" class="section level2">
<h2 class="hasAnchor">
<a href="#change-summary-statistics-globally" class="anchor"></a>1. Change summary statistics globally</h2>
<p>There are standard settings for each type of model regarding what information is summarized in the table. This behavior can be modified using the modelsum.control function. In fact, you can save your standard settings and use that for future tables.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="op">&gt;</span><span class="st"> </span>mycontrols  &lt;-<span class="st"> </span><span class="kw">modelsum.control</span>(<span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"estimate"</span>,<span class="st">"std.error"</span>,<span class="st">"adj.r.squared"</span>,<span class="st">"Nmiss"</span>),</span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="op">+</span><span class="st">                                 </span><span class="dt">show.adjust=</span><span class="ot">FALSE</span>, <span class="dt">show.intercept=</span><span class="ot">FALSE</span>)                            </span>
<span id="cb36-3"><a href="#cb36-3"></a><span class="op">&gt;</span><span class="st"> </span>tab2 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>age, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">data=</span>mockstudy, <span class="dt">control=</span>mycontrols)</span>
<span id="cb36-4"><a href="#cb36-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab2)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr></tbody>
</table>
<p>You can also change these settings directly in the modelsum call.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="op">&gt;</span><span class="st"> </span>tab3 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st">  </span>age, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">data=</span>mockstudy,</span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="op">+</span><span class="st">                  </span><span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"estimate"</span>,<span class="st">"std.error"</span>,<span class="st">"adj.r.squared"</span>,<span class="st">"Nmiss"</span>), </span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="op">+</span><span class="st">                  </span><span class="dt">show.intercept=</span><span class="ot">FALSE</span>, <span class="dt">show.adjust=</span><span class="ot">FALSE</span>)</span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab3)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left"><strong>Age in Years</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr></tbody>
</table>
</div>
<div id="add-labels-to-independent-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#add-labels-to-independent-variables" class="anchor"></a>2. Add labels to independent variables</h2>
<p>In the above example, age is shown with a label (Age in Years), but sex is listed “as is”. This is because the data was created in SAS and in the SAS dataset, age had a label but sex did not. The label is stored as an attribute within R.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## Look at one variable's label</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">attr</span>(mockstudy<span class="op">$</span>age,<span class="st">'label'</span>)</span>
<span id="cb38-3"><a href="#cb38-3"></a>[<span class="dv">1</span>] <span class="st">"Age in Years"</span></span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb38-5"><a href="#cb38-5"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## See all the variables with a label</span></span>
<span id="cb38-6"><a href="#cb38-6"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(mockstudy,<span class="st">'attr'</span>,<span class="st">'label'</span>))</span>
<span id="cb38-7"><a href="#cb38-7"></a>                       age                        arm </span>
<span id="cb38-8"><a href="#cb38-8"></a>            <span class="st">"Age in Years"</span>            <span class="st">"Treatment Arm"</span> </span>
<span id="cb38-9"><a href="#cb38-9"></a>                      race                        bmi </span>
<span id="cb38-10"><a href="#cb38-10"></a>                    <span class="st">"Race"</span> <span class="st">"Body Mass Index (kg/m^2)"</span> </span>
<span id="cb38-11"><a href="#cb38-11"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb38-12"><a href="#cb38-12"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## or</span></span>
<span id="cb38-13"><a href="#cb38-13"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">cbind</span>(<span class="kw">sapply</span>(mockstudy,attr,<span class="st">'label'</span>))</span>
<span id="cb38-14"><a href="#cb38-14"></a>            [,<span class="dv">1</span>]                      </span>
<span id="cb38-15"><a href="#cb38-15"></a>case        <span class="ot">NULL</span>                      </span>
<span id="cb38-16"><a href="#cb38-16"></a>age         <span class="st">"Age in Years"</span>            </span>
<span id="cb38-17"><a href="#cb38-17"></a>arm         <span class="st">"Treatment Arm"</span>           </span>
<span id="cb38-18"><a href="#cb38-18"></a>sex         <span class="ot">NULL</span>                      </span>
<span id="cb38-19"><a href="#cb38-19"></a>race        <span class="st">"Race"</span>                    </span>
<span id="cb38-20"><a href="#cb38-20"></a>fu.time     <span class="ot">NULL</span>                      </span>
<span id="cb38-21"><a href="#cb38-21"></a>fu.stat     <span class="ot">NULL</span>                      </span>
<span id="cb38-22"><a href="#cb38-22"></a>ps          <span class="ot">NULL</span>                      </span>
<span id="cb38-23"><a href="#cb38-23"></a>hgb         <span class="ot">NULL</span>                      </span>
<span id="cb38-24"><a href="#cb38-24"></a>bmi         <span class="st">"Body Mass Index (kg/m^2)"</span></span>
<span id="cb38-25"><a href="#cb38-25"></a>alk.phos    <span class="ot">NULL</span>                      </span>
<span id="cb38-26"><a href="#cb38-26"></a>ast         <span class="ot">NULL</span>                      </span>
<span id="cb38-27"><a href="#cb38-27"></a>mdquality.s <span class="ot">NULL</span>                      </span>
<span id="cb38-28"><a href="#cb38-28"></a>age.ord     <span class="ot">NULL</span>                      </span></code></pre></div>
<p>If you want to add labels to other variables, there are a couple of options. First, you could add labels to the variables in your dataset.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attr</span>(mockstudy<span class="op">$</span>age,<span class="st">'label'</span>)  &lt;-<span class="st"> 'Age, yrs'</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb39-3"><a href="#cb39-3"></a><span class="er">&gt;</span><span class="st"> </span>tab1 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st">  </span>age, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">data=</span>mockstudy)</span>
<span id="cb39-4"><a href="#cb39-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>You can also use the built-in <code>data.frame</code> method for <code>labels&lt;-</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">labels</span>(mockstudy)  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">age =</span> <span class="st">'Age, yrs'</span>)</span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb40-3"><a href="#cb40-3"></a><span class="er">&gt;</span><span class="st"> </span>tab1 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st">  </span>age, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">data=</span>mockstudy)</span>
<span id="cb40-4"><a href="#cb40-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>Another option is to add labels after you have created the table</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="op">&gt;</span><span class="st"> </span>mylabels &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">sexFemale =</span> <span class="st">"Female"</span>, <span class="dt">age =</span><span class="st">"Age, yrs"</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1, <span class="dt">labelTranslations =</span> mylabels)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>Alternatively, you can check the variable labels and manipulate them with a function called <code>labels</code>, which works on the <code>modelsum</code> object.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">labels</span>(tab1)</span>
<span id="cb42-2"><a href="#cb42-2"></a>                       bmi                        age </span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="st">"Body Mass Index (kg/m^2)"</span>                 <span class="st">"Age, yrs"</span> </span>
<span id="cb42-4"><a href="#cb42-4"></a>                       sex </span>
<span id="cb42-5"><a href="#cb42-5"></a>              <span class="st">"sex Female"</span> </span>
<span id="cb42-6"><a href="#cb42-6"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">labels</span>(tab1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">sexFemale=</span><span class="st">"Female"</span>, <span class="dt">age=</span><span class="st">"Baseline Age (yrs)"</span>)</span>
<span id="cb42-7"><a href="#cb42-7"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">labels</span>(tab1)</span>
<span id="cb42-8"><a href="#cb42-8"></a>                       bmi                        age </span>
<span id="cb42-9"><a href="#cb42-9"></a><span class="st">"Body Mass Index (kg/m^2)"</span>       <span class="st">"Baseline Age (yrs)"</span> </span>
<span id="cb42-10"><a href="#cb42-10"></a>                       sex </span>
<span id="cb42-11"><a href="#cb42-11"></a>                  <span class="st">"Female"</span> </span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.793</td>
<td align="left">0.766</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Baseline Age (yrs)</strong></td>
<td align="left">0.012</td>
<td align="left">0.012</td>
<td align="left">0.348</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Female</strong></td>
<td align="left">-0.718</td>
<td align="left">0.291</td>
<td align="left">0.014</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="dont-show-intercept-values" class="section level2">
<h2 class="hasAnchor">
<a href="#dont-show-intercept-values" class="anchor"></a>3. Don’t show intercept values</h2>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(age<span class="op">~</span>mdquality.s<span class="op">+</span>sex, <span class="dt">data=</span>mockstudy), <span class="dt">show.intercept=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><strong>mdquality.s</strong></td>
<td align="left">-0.326</td>
<td align="left">1.093</td>
<td align="left">0.766</td>
<td align="left">-0.001</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-1.208</td>
<td align="left">0.610</td>
<td align="left">0.048</td>
<td align="left">0.002</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
</div>
<div id="dont-show-results-for-adjustment-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#dont-show-results-for-adjustment-variables" class="anchor"></a>4. Don’t show results for adjustment variables</h2>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(mdquality.s <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">data=</span>mockstudy, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">family=</span>binomial),</span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="op">+</span><span class="st">         </span><span class="dt">show.adjust=</span><span class="ot">FALSE</span>)  </span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.272</td>
<td align="left">3.831</td>
<td align="left">28.876</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.507</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.998</td>
<td align="left">0.981</td>
<td align="left">1.014</td>
<td align="left">0.776</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.814</td>
<td align="left">1.709</td>
<td align="left">13.221</td>
<td align="left">0.003</td>
<td align="left">0.550</td>
<td align="left">273</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.063</td>
<td align="left">0.220</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-multiple-variables-without-typing-them-out" class="section level2">
<h2 class="hasAnchor">
<a href="#summarize-multiple-variables-without-typing-them-out" class="anchor"></a>5. Summarize multiple variables without typing them out</h2>
<p>Often one wants to summarize a number of variables. Instead of typing by hand each individual variable, an alternative approach is to create a formula using the <code>paste</code> command with the <code>collapse="+"</code> option.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># create a vector specifying the variable names</span></span>
<span id="cb46-2"><a href="#cb46-2"></a><span class="er">&gt;</span><span class="st"> </span>myvars &lt;-<span class="st"> </span><span class="kw">names</span>(mockstudy)</span>
<span id="cb46-3"><a href="#cb46-3"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># select the 8th through the 12th</span></span>
<span id="cb46-5"><a href="#cb46-5"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># paste them together, separated by the + sign</span></span>
<span id="cb46-6"><a href="#cb46-6"></a><span class="er">&gt;</span><span class="st"> </span>RHS &lt;-<span class="st"> </span><span class="kw">paste</span>(myvars[<span class="dv">8</span><span class="op">:</span><span class="dv">12</span>], <span class="dt">collapse=</span><span class="st">"+"</span>)</span>
<span id="cb46-7"><a href="#cb46-7"></a><span class="op">&gt;</span><span class="st"> </span>RHS</span></code></pre></div>
<p>[1] “ps+hgb+bmi+alk.phos+ast”</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># create a formula using the as.formula function</span></span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">as.formula</span>(<span class="kw">paste</span>(<span class="st">'mdquality.s ~ '</span>, RHS))</span></code></pre></div>
<p>mdquality.s ~ ps + hgb + bmi + alk.phos + ast</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb48-2"><a href="#cb48-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co"># use the formula in the modelsum function</span></span>
<span id="cb48-3"><a href="#cb48-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(<span class="kw">as.formula</span>(<span class="kw">paste</span>(<span class="st">'mdquality.s ~'</span>, RHS)), <span class="dt">family=</span>binomial, <span class="dt">data=</span>mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">14.628</td>
<td align="left">10.755</td>
<td align="left">20.399</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.620</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">0.461</td>
<td align="left">0.332</td>
<td align="left">0.639</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.236</td>
<td align="left">0.272</td>
<td align="left">5.560</td>
<td align="left">0.783</td>
<td align="left">0.573</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">1.176</td>
<td align="left">1.040</td>
<td align="left">1.334</td>
<td align="left">0.011</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.963</td>
<td align="left">1.818</td>
<td align="left">13.292</td>
<td align="left">0.002</td>
<td align="left">0.549</td>
<td align="left">273</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.062</td>
<td align="left">0.225</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.622</td>
<td align="left">7.687</td>
<td align="left">14.794</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.552</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="left">0.999</td>
<td align="left">0.998</td>
<td align="left">1.000</td>
<td align="left">0.159</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.936</td>
<td align="left">7.912</td>
<td align="left">15.232</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.545</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">0.995</td>
<td align="left">0.988</td>
<td align="left">1.001</td>
<td align="left">0.099</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>These steps can also be done using the <code>formulize</code> function.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## The formulize function does the paste and as.formula steps</span></span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="er">&gt;</span><span class="st"> </span>tmp &lt;-<span class="st"> </span><span class="kw">formulize</span>(<span class="st">'mdquality.s'</span>,myvars[<span class="dv">8</span><span class="op">:</span><span class="dv">10</span>])</span>
<span id="cb49-3"><a href="#cb49-3"></a><span class="op">&gt;</span><span class="st"> </span>tmp</span></code></pre></div>
<p>mdquality.s ~ ps + hgb + bmi</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## More complex formulas could also be written using formulize</span></span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="er">&gt;</span><span class="st"> </span>tmp2 &lt;-<span class="st"> </span><span class="kw">formulize</span>(<span class="st">'mdquality.s'</span>,<span class="kw">c</span>(<span class="st">'ps'</span>,<span class="st">'hgb'</span>,<span class="st">'sqrt(bmi)'</span>))</span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb50-5"><a href="#cb50-5"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## use the formula in the modelsum function</span></span>
<span id="cb50-6"><a href="#cb50-6"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(tmp, <span class="dt">data=</span>mockstudy, <span class="dt">family=</span>binomial))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">14.628</td>
<td align="left">10.755</td>
<td align="left">20.399</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.620</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">0.461</td>
<td align="left">0.332</td>
<td align="left">0.639</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.236</td>
<td align="left">0.272</td>
<td align="left">5.560</td>
<td align="left">0.783</td>
<td align="left">0.573</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">1.176</td>
<td align="left">1.040</td>
<td align="left">1.334</td>
<td align="left">0.011</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.963</td>
<td align="left">1.818</td>
<td align="left">13.292</td>
<td align="left">0.002</td>
<td align="left">0.549</td>
<td align="left">273</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.023</td>
<td align="left">0.987</td>
<td align="left">1.062</td>
<td align="left">0.225</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="subset-the-dataset-used-in-the-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#subset-the-dataset-used-in-the-analysis" class="anchor"></a>6. Subset the dataset used in the analysis</h2>
<p>Here are two ways to get the same result (limit the analysis to subjects age&gt;50 and in the F: FOLFOX treatment group).</p>
<ul>
<li>The first approach uses the subset function applied to the dataset <code>mockstudy</code>. This example also selects a subset of variables. The <code>modelsum</code> function is then applied to this subsetted data.</li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="op">&gt;</span><span class="st"> </span>newdata &lt;-<span class="st"> </span><span class="kw">subset</span>(mockstudy, <span class="dt">subset=</span>age<span class="op">&gt;</span><span class="dv">50</span> <span class="op">&amp;</span><span class="st"> </span>arm<span class="op">==</span><span class="st">'F: FOLFOX'</span>, <span class="dt">select =</span> <span class="kw">c</span>(age,sex, bmi<span class="op">:</span>alk.phos))</span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(mockstudy)</span>
<span id="cb51-3"><a href="#cb51-3"></a>[<span class="dv">1</span>] <span class="dv">1499</span>   <span class="dv">14</span></span>
<span id="cb51-4"><a href="#cb51-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">table</span>(mockstudy<span class="op">$</span>arm)</span>
<span id="cb51-5"><a href="#cb51-5"></a></span>
<span id="cb51-6"><a href="#cb51-6"></a>   A<span class="op">:</span><span class="st"> </span>IFL F<span class="op">:</span><span class="st"> </span>FOLFOX   G<span class="op">:</span><span class="st"> </span>IROX </span>
<span id="cb51-7"><a href="#cb51-7"></a>      <span class="dv">428</span>       <span class="dv">691</span>       <span class="dv">380</span> </span>
<span id="cb51-8"><a href="#cb51-8"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">dim</span>(newdata)</span>
<span id="cb51-9"><a href="#cb51-9"></a>[<span class="dv">1</span>] <span class="dv">557</span>   <span class="dv">4</span></span>
<span id="cb51-10"><a href="#cb51-10"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(newdata)</span>
<span id="cb51-11"><a href="#cb51-11"></a>[<span class="dv">1</span>] <span class="st">"age"</span>      <span class="st">"sex"</span>      <span class="st">"bmi"</span>      <span class="st">"alk.phos"</span></span></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(alk.phos <span class="op">~</span><span class="st"> </span>., <span class="dt">data=</span>newdata))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">122.577</td>
<td align="left">46.924</td>
<td align="left">0.009</td>
<td align="left">-0.001</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>age</strong></td>
<td align="left">0.619</td>
<td align="left">0.719</td>
<td align="left">0.390</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">164.814</td>
<td align="left">7.673</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-5.497</td>
<td align="left">12.118</td>
<td align="left">0.650</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">238.658</td>
<td align="left">33.705</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.010</td>
<td align="left">119</td>
</tr>
<tr class="even">
<td align="left"><strong>bmi</strong></td>
<td align="left">-2.776</td>
<td align="left">1.207</td>
<td align="left">0.022</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<ul>
<li>The second approach does the same analysis but uses the subset argument within <code>modelsum</code> to subset the data.</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(<span class="kw">log</span>(alk.phos) <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>ps <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">subset=</span>age<span class="op">&gt;</span><span class="dv">50</span> <span class="op">&amp;</span><span class="st"> </span>arm<span class="op">==</span><span class="st">"F: FOLFOX"</span>, <span class="dt">data=</span>mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.872</td>
<td align="left">0.039</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.005</td>
<td align="left">0.062</td>
<td align="left">0.931</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">4.770</td>
<td align="left">0.040</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.027</td>
<td align="left">108</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">0.183</td>
<td align="left">0.050</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">5.207</td>
<td align="left">0.172</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.007</td>
<td align="left">119</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">-0.012</td>
<td align="left">0.006</td>
<td align="left">0.044</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(alk.phos <span class="op">~</span><span class="st"> </span>ps <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">subset =</span> age<span class="op">&gt;</span><span class="dv">50</span> <span class="op">&amp;</span><span class="st"> </span>bmi<span class="op">&lt;</span><span class="dv">24</span>, <span class="dt">data=</span>mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">178.812</td>
<td align="left">14.550</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.007</td>
<td align="left">77</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">20.834</td>
<td align="left">13.440</td>
<td align="left">0.122</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-17.542</td>
<td align="left">16.656</td>
<td align="left">0.293</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">373.008</td>
<td align="left">104.272</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.009</td>
<td align="left">77</td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">-8.239</td>
<td align="left">4.727</td>
<td align="left">0.083</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-24.058</td>
<td align="left">16.855</td>
<td align="left">0.155</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(alk.phos <span class="op">~</span><span class="st"> </span>ps <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">adjust=</span><span class="op">~</span>sex, <span class="dt">subset=</span><span class="dv">1</span><span class="op">:</span><span class="dv">30</span>, <span class="dt">data=</span>mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">169.112</td>
<td align="left">57.013</td>
<td align="left">0.006</td>
<td align="left">0.294</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>ps</strong></td>
<td align="left">254.901</td>
<td align="left">68.100</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>sex Female</strong></td>
<td align="left">49.566</td>
<td align="left">67.643</td>
<td align="left">0.470</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="left">453.070</td>
<td align="left">200.651</td>
<td align="left">0.033</td>
<td align="left">-0.049</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">-5.993</td>
<td align="left">7.408</td>
<td align="left">0.426</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-22.308</td>
<td align="left">79.776</td>
<td align="left">0.782</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="create-combinations-of-variables-on-the-fly" class="section level2">
<h2 class="hasAnchor">
<a href="#create-combinations-of-variables-on-the-fly" class="anchor"></a>7. Create combinations of variables on the fly</h2>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## create a variable combining the levels of mdquality.s and sex</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">table</span>(<span class="kw">interaction</span>(mdquality.s,sex)))</span>
<span id="cb56-3"><a href="#cb56-3"></a></span>
<span id="cb56-4"><a href="#cb56-4"></a>  <span class="fl">0.</span>Male   <span class="fl">1.</span>Male <span class="fl">0.</span>Female <span class="fl">1.</span>Female </span>
<span id="cb56-5"><a href="#cb56-5"></a>      <span class="dv">77</span>      <span class="dv">686</span>       <span class="dv">47</span>      <span class="dv">437</span> </span></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(age <span class="op">~</span><span class="st"> </span><span class="kw">interaction</span>(mdquality.s,sex), <span class="dt">data=</span>mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">59.714</td>
<td align="left">1.314</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.003</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>interaction(mdquality.s, sex) 1.Male</strong></td>
<td align="left">0.730</td>
<td align="left">1.385</td>
<td align="left">0.598</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>interaction(mdquality.s, sex) 0.Female</strong></td>
<td align="left">0.988</td>
<td align="left">2.134</td>
<td align="left">0.643</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>interaction(mdquality.s, sex) 1.Female</strong></td>
<td align="left">-1.021</td>
<td align="left">1.425</td>
<td align="left">0.474</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="transform-variables-on-the-fly" class="section level2">
<h2 class="hasAnchor">
<a href="#transform-variables-on-the-fly" class="anchor"></a>8. Transform variables on the fly</h2>
<p>Certain transformations need to be surrounded by <code><a href="https://rdrr.io/r/base/AsIs.html">I()</a></code> so that R knows to treat it as a variable transformation and not some special model feature. If the transformation includes any of the symbols <code>/ - + ^ *</code> then surround the new variable by <code><a href="https://rdrr.io/r/base/AsIs.html">I()</a></code>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(arm<span class="op">==</span><span class="st">"F: FOLFOX"</span> <span class="op">~</span><span class="st"> </span><span class="kw">I</span>(age<span class="op">/</span><span class="dv">10</span>) <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(bmi) <span class="op">+</span><span class="st"> </span>mdquality.s,</span>
<span id="cb58-2"><a href="#cb58-2"></a><span class="op">+</span><span class="st">                  </span><span class="dt">data=</span>mockstudy, <span class="dt">family=</span>binomial))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.656</td>
<td align="left">0.382</td>
<td align="left">1.124</td>
<td align="left">0.126</td>
<td align="left">0.514</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">1.045</td>
<td align="left">0.957</td>
<td align="left">1.142</td>
<td align="left">0.326</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.633</td>
<td align="left">0.108</td>
<td align="left">3.698</td>
<td align="left">0.611</td>
<td align="left">0.508</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.092</td>
<td align="left">0.638</td>
<td align="left">1.867</td>
<td align="left">0.748</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.722</td>
<td align="left">0.503</td>
<td align="left">1.029</td>
<td align="left">0.074</td>
<td align="left">0.502</td>
<td align="left">252</td>
</tr>
<tr class="even">
<td align="left"><strong>mdquality.s</strong></td>
<td align="left">1.045</td>
<td align="left">0.719</td>
<td align="left">1.527</td>
<td align="left">0.819</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="change-the-ordering-of-the-variables-or-delete-a-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#change-the-ordering-of-the-variables-or-delete-a-variable" class="anchor"></a>9. Change the ordering of the variables or delete a variable</h2>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="op">&gt;</span><span class="st"> </span>mytab &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>alk.phos <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="op">&gt;</span><span class="st"> </span>mytab2 &lt;-<span class="st"> </span>mytab[<span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>,<span class="st">'alk.phos'</span>)]</span>
<span id="cb59-3"><a href="#cb59-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(mytab2)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.944</td>
<td align="left">0.253</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.011</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="left">-0.005</td>
<td align="left">0.001</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(mytab[<span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>)])</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(mytab[<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)])</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="merge-two-modelsum-objects-together" class="section level2">
<h2 class="hasAnchor">
<a href="#merge-two-modelsum-objects-together" class="anchor"></a>10. Merge two <code>modelsum</code> objects together</h2>
<p>It is possible to merge two modelsum objects so that they print out together, however you need to pay attention to the columns that are being displayed. It is sometimes easier to combine two models of the same family (such as two sets of linear models). Overlapping y-variables will have their x-variables concatenated, and (if <code>all=TRUE</code>) non-overlapping y-variables will have their tables printed separately.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## demographics</span></span>
<span id="cb62-2"><a href="#cb62-2"></a><span class="er">&gt;</span><span class="st"> </span>tab1 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</span>
<span id="cb62-3"><a href="#cb62-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## lab data</span></span>
<span id="cb62-4"><a href="#cb62-4"></a><span class="er">&gt;</span><span class="st"> </span>tab2 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(mdquality.s <span class="op">~</span><span class="st"> </span>hgb <span class="op">+</span><span class="st"> </span>alk.phos, <span class="dt">data=</span>mockstudy, <span class="dt">family=</span>binomial)</span>
<span id="cb62-5"><a href="#cb62-5"></a><span class="op">&gt;</span><span class="st">                 </span></span>
<span id="cb62-6"><a href="#cb62-6"></a><span class="er">&gt;</span><span class="st"> </span>tab12 &lt;-<span class="st"> </span><span class="kw">merge</span>(tab1, tab2, <span class="dt">all =</span> <span class="ot">TRUE</span>)</span>
<span id="cb62-7"><a href="#cb62-7"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(tab12)</span></code></pre></div>
<p>[1] “modelsum” “arsenal_table”</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab12)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.236</td>
<td align="left">0.272</td>
<td align="left">5.560</td>
<td align="left">0.783</td>
<td align="left">0.573</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">1.176</td>
<td align="left">1.040</td>
<td align="left">1.334</td>
<td align="left">0.011</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">10.622</td>
<td align="left">7.687</td>
<td align="left">14.794</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.552</td>
<td align="left">460</td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="left">0.999</td>
<td align="left">0.998</td>
<td align="left">1.000</td>
<td align="left">0.159</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="add-a-title-to-the-table" class="section level2">
<h2 class="hasAnchor">
<a href="#add-a-title-to-the-table" class="anchor"></a>11. Add a title to the table</h2>
<p>When creating a pdf the tables are automatically numbered and the title appears below the table. In Word and HTML, the titles appear un-numbered and above the table.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="op">&gt;</span><span class="st"> </span>t1 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</span>
<span id="cb64-2"><a href="#cb64-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(t1, <span class="dt">title=</span><span class="st">'Demographics'</span>)</span></code></pre></div>
<table class="table">
<caption>Demographics</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.491</td>
<td align="left">0.181</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.731</td>
<td align="left">0.290</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">0.752</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left">0.012</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="modify-how-missing-values-are-treated" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-how-missing-values-are-treated" class="anchor"></a>12. Modify how missing values are treated</h2>
<p>Depending on the report you are writing you have the following options:</p>
<ul>
<li><p>Use all values available for each variable</p></li>
<li><p>Use only those subjects who have measurements available for all the variables</p></li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## look at how many missing values there are for each variable</span></span>
<span id="cb65-2"><a href="#cb65-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">apply</span>(<span class="kw">is.na</span>(mockstudy),<span class="dv">2</span>,sum)</span>
<span id="cb65-3"><a href="#cb65-3"></a>       case         age         arm         sex        race     fu.time </span>
<span id="cb65-4"><a href="#cb65-4"></a>          <span class="dv">0</span>           <span class="dv">0</span>           <span class="dv">0</span>           <span class="dv">0</span>           <span class="dv">7</span>           <span class="dv">0</span> </span>
<span id="cb65-5"><a href="#cb65-5"></a>    fu.stat          ps         hgb         bmi    alk.phos         ast </span>
<span id="cb65-6"><a href="#cb65-6"></a>          <span class="dv">0</span>         <span class="dv">266</span>         <span class="dv">266</span>          <span class="dv">33</span>         <span class="dv">266</span>         <span class="dv">266</span> </span>
<span id="cb65-7"><a href="#cb65-7"></a>mdquality.s     age.ord </span>
<span id="cb65-8"><a href="#cb65-8"></a>        <span class="dv">252</span>           <span class="dv">0</span> </span></code></pre></div>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## Show how many subjects have each variable (non-missing)</span></span>
<span id="cb66-2"><a href="#cb66-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy,</span>
<span id="cb66-3"><a href="#cb66-3"></a><span class="op">+</span><span class="st">                 </span><span class="dt">control=</span><span class="kw">modelsum.control</span>(<span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"N"</span>,<span class="st">"estimate"</span>))))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
<td align="left">1205</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">1466</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## Always list the number of missing values</span></span>
<span id="cb67-3"><a href="#cb67-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy,</span>
<span id="cb67-4"><a href="#cb67-4"></a><span class="op">+</span><span class="st">                 </span><span class="dt">control=</span><span class="kw">modelsum.control</span>(<span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"Nmiss2"</span>,<span class="st">"estimate"</span>))))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">Nmiss2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb68-2"><a href="#cb68-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## Only show the missing values if there are some (default)</span></span>
<span id="cb68-3"><a href="#cb68-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, </span>
<span id="cb68-4"><a href="#cb68-4"></a><span class="op">+</span><span class="st">                 </span><span class="dt">control=</span><span class="kw">modelsum.control</span>(<span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"Nmiss"</span>,<span class="st">"estimate"</span>))))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb69-2"><a href="#cb69-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## Don't show N at all</span></span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, </span>
<span id="cb69-4"><a href="#cb69-4"></a><span class="op">+</span><span class="st">                 </span><span class="dt">control=</span><span class="kw">modelsum.control</span>(<span class="dt">gaussian.stats=</span><span class="kw">c</span>(<span class="st">"estimate"</span>))))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.331</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">-0.005</td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.424</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.013</td>
</tr>
</tbody>
</table>
</div>
<div id="modify-the-number-of-digits-used" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-the-number-of-digits-used" class="anchor"></a>13. Modify the number of digits used</h2>
<p>Within modelsum.control function there are 3 options for controlling the number of significant digits shown.</p>
<ul>
<li><p>digits: controls the number of digits after the decimal point for continuous values</p></li>
<li><p>digits.ratio: controls the number of digits after the decimal point for continuous values</p></li>
<li><p>digits.p: controls the number of digits after the decimal point for continuous values</p></li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(bmi <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>fu.time, <span class="dt">data=</span>mockstudy), <span class="dt">digits=</span><span class="dv">4</span>, <span class="dt">digits.test=</span><span class="dv">2</span>)</span>
<span id="cb70-2"><a href="#cb70-2"></a>Warning<span class="op">:</span><span class="st"> </span>Using <span class="st">'digits.test = '</span> is deprecated. Use <span class="st">'digits.p = '</span> instead.</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">27.4915</td>
<td align="left">0.1813</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.0036</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.7311</td>
<td align="left">0.2903</td>
<td align="left">0.012</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.4237</td>
<td align="left">0.7521</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.0001</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="left">0.0130</td>
<td align="left">0.0123</td>
<td align="left">0.290</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">26.4937</td>
<td align="left">0.2447</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.0079</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>fu.time</strong></td>
<td align="left">0.0011</td>
<td align="left">0.0003</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="use-case-weights-in-the-models" class="section level2">
<h2 class="hasAnchor">
<a href="#use-case-weights-in-the-models" class="anchor"></a>14. Use case-weights in the models</h2>
<p>Occasionally it is of interest to fit models using case weights. The <code>modelsum</code> function allows you to pass on the weights to the models and it will do the appropriate fit.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a><span class="op">&gt;</span><span class="st"> </span>mockstudy<span class="op">$</span>agegp &lt;-<span class="st"> </span><span class="kw">cut</span>(mockstudy<span class="op">$</span>age, <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">18</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">90</span>), <span class="dt">right=</span><span class="ot">FALSE</span>)</span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb71-3"><a href="#cb71-3"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## create weights based on agegp and sex distribution</span></span>
<span id="cb71-4"><a href="#cb71-4"></a><span class="er">&gt;</span><span class="st"> </span>tab1 &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy,<span class="kw">table</span>(agegp, sex))</span>
<span id="cb71-5"><a href="#cb71-5"></a><span class="op">&gt;</span><span class="st"> </span>tab1</span>
<span id="cb71-6"><a href="#cb71-6"></a>         sex</span>
<span id="cb71-7"><a href="#cb71-7"></a>agegp     Male Female</span>
<span id="cb71-8"><a href="#cb71-8"></a>  [<span class="dv">18</span>,<span class="dv">50</span><span class="er">)</span>  <span class="dv">152</span>    <span class="dv">110</span></span>
<span id="cb71-9"><a href="#cb71-9"></a>  [<span class="dv">50</span>,<span class="dv">60</span><span class="er">)</span>  <span class="dv">258</span>    <span class="dv">178</span></span>
<span id="cb71-10"><a href="#cb71-10"></a>  [<span class="dv">60</span>,<span class="dv">70</span><span class="er">)</span>  <span class="dv">295</span>    <span class="dv">173</span></span>
<span id="cb71-11"><a href="#cb71-11"></a>  [<span class="dv">70</span>,<span class="dv">90</span><span class="er">)</span>  <span class="dv">211</span>    <span class="dv">122</span></span>
<span id="cb71-12"><a href="#cb71-12"></a><span class="op">&gt;</span><span class="st"> </span>tab2 &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">table</span>(agegp, sex, arm))</span>
<span id="cb71-13"><a href="#cb71-13"></a><span class="op">&gt;</span><span class="st"> </span>gpwts &lt;-<span class="st"> </span><span class="kw">rep</span>(tab1, <span class="kw">length</span>(<span class="kw">unique</span>(mockstudy<span class="op">$</span>arm)))<span class="op">/</span>tab2</span>
<span id="cb71-14"><a href="#cb71-14"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb71-15"><a href="#cb71-15"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## apply weights to subjects</span></span>
<span id="cb71-16"><a href="#cb71-16"></a><span class="er">&gt;</span><span class="st"> </span>index &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">cbind</span>(<span class="kw">as.numeric</span>(agegp), <span class="kw">as.numeric</span>(sex), <span class="kw">as.numeric</span>(<span class="kw">as.factor</span>(arm)))) </span>
<span id="cb71-17"><a href="#cb71-17"></a><span class="op">&gt;</span><span class="st"> </span>mockstudy<span class="op">$</span>wts &lt;-<span class="st"> </span>gpwts[index]</span>
<span id="cb71-18"><a href="#cb71-18"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb71-19"><a href="#cb71-19"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## show weights by treatment arm group</span></span>
<span id="cb71-20"><a href="#cb71-20"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">tapply</span>(mockstudy<span class="op">$</span>wts,mockstudy<span class="op">$</span>arm, summary)</span>
<span id="cb71-21"><a href="#cb71-21"></a><span class="op">$</span><span class="st">`</span><span class="dt">A: IFL</span><span class="st">`</span></span>
<span id="cb71-22"><a href="#cb71-22"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb71-23"><a href="#cb71-23"></a>  <span class="fl">2.923</span>   <span class="fl">3.225</span>   <span class="fl">3.548</span>   <span class="fl">3.502</span>   <span class="fl">3.844</span>   <span class="fl">4.045</span> </span>
<span id="cb71-24"><a href="#cb71-24"></a></span>
<span id="cb71-25"><a href="#cb71-25"></a><span class="op">$</span><span class="st">`</span><span class="dt">F: FOLFOX</span><span class="st">`</span></span>
<span id="cb71-26"><a href="#cb71-26"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb71-27"><a href="#cb71-27"></a>  <span class="fl">2.033</span>   <span class="fl">2.070</span>   <span class="fl">2.201</span>   <span class="fl">2.169</span>   <span class="fl">2.263</span>   <span class="fl">2.303</span> </span>
<span id="cb71-28"><a href="#cb71-28"></a></span>
<span id="cb71-29"><a href="#cb71-29"></a><span class="op">$</span><span class="st">`</span><span class="dt">G: IROX</span><span class="st">`</span></span>
<span id="cb71-30"><a href="#cb71-30"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb71-31"><a href="#cb71-31"></a>  <span class="fl">3.667</span>   <span class="fl">3.734</span>   <span class="fl">4.023</span>   <span class="fl">3.945</span>   <span class="fl">4.031</span>   <span class="fl">4.471</span> </span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="op">&gt;</span><span class="st"> </span>mockstudy<span class="op">$</span>newvarA &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(mockstudy<span class="op">$</span>arm<span class="op">==</span><span class="st">'A: IFL'</span>)</span>
<span id="cb72-2"><a href="#cb72-2"></a><span class="op">&gt;</span><span class="st"> </span>tab1 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(newvarA <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, <span class="dt">subset=</span>(arm <span class="op">!=</span><span class="st">'G: IROX'</span>), </span>
<span id="cb72-3"><a href="#cb72-3"></a><span class="op">+</span><span class="st">                  </span><span class="dt">family=</span>binomial)</span>
<span id="cb72-4"><a href="#cb72-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab1, <span class="dt">title=</span><span class="st">'No Case Weights used'</span>)</span></code></pre></div>
<table class="table">
<caption>No Case Weights used</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.590</td>
<td align="left">0.473</td>
<td align="left">0.735</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.550</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">1.003</td>
<td align="left">0.998</td>
<td align="left">1.008</td>
<td align="left">0.258</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.578</td>
<td align="left">0.306</td>
<td align="left">1.093</td>
<td align="left">0.091</td>
<td align="left">0.500</td>
<td align="left">29</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.003</td>
<td align="left">0.980</td>
<td align="left">1.026</td>
<td align="left">0.808</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.006</td>
<td align="left">0.386</td>
<td align="left">2.631</td>
<td align="left">0.990</td>
<td align="left">0.514</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">0.965</td>
<td align="left">0.894</td>
<td align="left">1.043</td>
<td align="left">0.372</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb73-2"><a href="#cb73-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">suppressWarnings</span>({</span>
<span id="cb73-3"><a href="#cb73-3"></a><span class="op">+</span><span class="st"> </span>tab2 &lt;-<span class="st"> </span><span class="kw">modelsum</span>(newvarA <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, <span class="dt">subset=</span>(arm <span class="op">!=</span><span class="st">'G: IROX'</span>), </span>
<span id="cb73-4"><a href="#cb73-4"></a><span class="op">+</span><span class="st">                  </span><span class="dt">weights=</span>wts, <span class="dt">family=</span>binomial)</span>
<span id="cb73-5"><a href="#cb73-5"></a><span class="op">+</span><span class="st"> </span><span class="kw">summary</span>(tab2, <span class="dt">title=</span><span class="st">'Case Weights used'</span>)</span>
<span id="cb73-6"><a href="#cb73-6"></a><span class="op">+</span><span class="st"> </span>})</span></code></pre></div>
<table class="table">
<caption>Case Weights used</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">OR</th>
<th align="left">CI.lower.OR</th>
<th align="left">CI.upper.OR</th>
<th align="left">p.value</th>
<th align="left">concordance</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.956</td>
<td align="left">0.837</td>
<td align="left">1.091</td>
<td align="left">0.504</td>
<td align="left">0.550</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="left">1.003</td>
<td align="left">1.000</td>
<td align="left">1.006</td>
<td align="left">0.068</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">0.957</td>
<td align="left">0.658</td>
<td align="left">1.393</td>
<td align="left">0.820</td>
<td align="left">0.500</td>
<td align="left">29</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">1.002</td>
<td align="left">0.988</td>
<td align="left">1.016</td>
<td align="left">0.780</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">1.829</td>
<td align="left">1.031</td>
<td align="left">3.248</td>
<td align="left">0.039</td>
<td align="left">0.514</td>
<td align="left">210</td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="left">0.956</td>
<td align="left">0.913</td>
<td align="left">1.001</td>
<td align="left">0.058</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="use-modelsum-within-an-sweave-document" class="section level2">
<h2 class="hasAnchor">
<a href="#use-modelsum-within-an-sweave-document" class="anchor"></a>15. Use <code>modelsum</code> within an Sweave document</h2>
<p>For those users who wish to create tables within an Sweave document, the following code seems to work.</p>
<pre><code>\documentclass{article}

\usepackage{longtable}
\usepackage{pdfpages}

\begin{document}

\section{Read in Data}
&lt;&lt;echo=TRUE&gt;&gt;=
require(arsenal)
require(knitr)
require(rmarkdown)
data(mockstudy)

tab1 &lt;- modelsum(bmi~sex+age, data=mockstudy)
@

\section{Convert Summary.modelsum to LaTeX}
&lt;&lt;echo=TRUE, results='hide', message=FALSE&gt;&gt;=
capture.output(summary(tab1), file="Test.md")

## Convert R Markdown Table to LaTeX
render("Test.md", pdf_document(keep_tex=TRUE))
@ 

\includepdf{Test.pdf}

\end{document}</code></pre>
</div>
<div id="export-modelsum-results-to-a--csv-file" class="section level2">
<h2 class="hasAnchor">
<a href="#export-modelsum-results-to-a--csv-file" class="anchor"></a>16. Export <code>modelsum</code> results to a .CSV file</h2>
<p>When looking at multiple variables it is sometimes useful to export the results to a csv file. The <code>as.data.frame</code> function creates a data frame object that can be exported or further manipulated within R.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(tab2, <span class="dt">text=</span>T)</span>
<span id="cb75-2"><a href="#cb75-2"></a></span>
<span id="cb75-3"><a href="#cb75-3"></a></span>
<span id="cb75-4"><a href="#cb75-4"></a><span class="op">|</span><span class="st">                         </span><span class="er">|</span>OR    <span class="op">|</span>CI.lower.OR <span class="op">|</span>CI.upper.OR <span class="op">|</span>p.value <span class="op">|</span>concordance <span class="op">|</span>Nmiss <span class="op">|</span></span>
<span id="cb75-5"><a href="#cb75-5"></a><span class="er">|:</span><span class="op">------------------------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|:</span><span class="op">-----------</span><span class="er">|:</span><span class="op">-----------</span><span class="er">|:</span><span class="op">-------</span><span class="er">|:</span><span class="op">-----------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|</span></span>
<span id="cb75-6"><a href="#cb75-6"></a><span class="er">|</span>(Intercept)              <span class="op">|</span><span class="fl">0.956</span> <span class="op">|</span><span class="fl">0.837</span>       <span class="op">|</span><span class="fl">1.091</span>       <span class="op">|</span><span class="fl">0.504</span>   <span class="op">|</span><span class="fl">0.550</span>       <span class="op">|</span><span class="dv">210</span>   <span class="op">|</span></span>
<span id="cb75-7"><a href="#cb75-7"></a><span class="er">|</span>ast                      <span class="op">|</span><span class="fl">1.003</span> <span class="op">|</span><span class="fl">1.000</span>       <span class="op">|</span><span class="fl">1.006</span>       <span class="op">|</span><span class="fl">0.068</span>   <span class="op">|</span><span class="st">            </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb75-8"><a href="#cb75-8"></a><span class="er">|</span>(Intercept)              <span class="op">|</span><span class="fl">0.957</span> <span class="op">|</span><span class="fl">0.658</span>       <span class="op">|</span><span class="fl">1.393</span>       <span class="op">|</span><span class="fl">0.820</span>   <span class="op">|</span><span class="fl">0.500</span>       <span class="op">|</span><span class="dv">29</span>    <span class="op">|</span></span>
<span id="cb75-9"><a href="#cb75-9"></a><span class="er">|</span>Body Mass <span class="kw">Index</span> (kg<span class="op">/</span>m<span class="op">^</span><span class="dv">2</span>) <span class="op">|</span><span class="fl">1.002</span> <span class="op">|</span><span class="fl">0.988</span>       <span class="op">|</span><span class="fl">1.016</span>       <span class="op">|</span><span class="fl">0.780</span>   <span class="op">|</span><span class="st">            </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb75-10"><a href="#cb75-10"></a><span class="er">|</span>(Intercept)              <span class="op">|</span><span class="fl">1.829</span> <span class="op">|</span><span class="fl">1.031</span>       <span class="op">|</span><span class="fl">3.248</span>       <span class="op">|</span><span class="fl">0.039</span>   <span class="op">|</span><span class="fl">0.514</span>       <span class="op">|</span><span class="dv">210</span>   <span class="op">|</span></span>
<span id="cb75-11"><a href="#cb75-11"></a><span class="er">|</span>hgb                      <span class="op">|</span><span class="fl">0.956</span> <span class="op">|</span><span class="fl">0.913</span>       <span class="op">|</span><span class="fl">1.001</span>       <span class="op">|</span><span class="fl">0.058</span>   <span class="op">|</span><span class="st">            </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb75-12"><a href="#cb75-12"></a><span class="er">&gt;</span><span class="st"> </span>tmp &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">summary</span>(tab2, <span class="dt">text =</span> <span class="ot">TRUE</span>))</span>
<span id="cb75-13"><a href="#cb75-13"></a><span class="op">&gt;</span><span class="st"> </span>tmp</span>
<span id="cb75-14"><a href="#cb75-14"></a>                              OR CI.lower.OR CI.upper.OR p.value concordance</span>
<span id="cb75-15"><a href="#cb75-15"></a><span class="dv">1</span>              (Intercept) <span class="fl">0.956</span>       <span class="fl">0.837</span>       <span class="fl">1.091</span>   <span class="fl">0.504</span>       <span class="fl">0.550</span></span>
<span id="cb75-16"><a href="#cb75-16"></a><span class="dv">2</span>                      ast <span class="fl">1.003</span>       <span class="fl">1.000</span>       <span class="fl">1.006</span>   <span class="fl">0.068</span>            </span>
<span id="cb75-17"><a href="#cb75-17"></a><span class="dv">3</span>              (Intercept) <span class="fl">0.957</span>       <span class="fl">0.658</span>       <span class="fl">1.393</span>   <span class="fl">0.820</span>       <span class="fl">0.500</span></span>
<span id="cb75-18"><a href="#cb75-18"></a><span class="dv">4</span> Body Mass <span class="kw">Index</span> (kg<span class="op">/</span>m<span class="op">^</span><span class="dv">2</span>) <span class="fl">1.002</span>       <span class="fl">0.988</span>       <span class="fl">1.016</span>   <span class="fl">0.780</span>            </span>
<span id="cb75-19"><a href="#cb75-19"></a><span class="dv">5</span>              (Intercept) <span class="fl">1.829</span>       <span class="fl">1.031</span>       <span class="fl">3.248</span>   <span class="fl">0.039</span>       <span class="fl">0.514</span></span>
<span id="cb75-20"><a href="#cb75-20"></a><span class="dv">6</span>                      hgb <span class="fl">0.956</span>       <span class="fl">0.913</span>       <span class="fl">1.001</span>   <span class="fl">0.058</span>            </span>
<span id="cb75-21"><a href="#cb75-21"></a>  Nmiss</span>
<span id="cb75-22"><a href="#cb75-22"></a><span class="dv">1</span>   <span class="dv">210</span></span>
<span id="cb75-23"><a href="#cb75-23"></a><span class="dv">2</span>      </span>
<span id="cb75-24"><a href="#cb75-24"></a><span class="dv">3</span>    <span class="dv">29</span></span>
<span id="cb75-25"><a href="#cb75-25"></a><span class="dv">4</span>      </span>
<span id="cb75-26"><a href="#cb75-26"></a><span class="dv">5</span>   <span class="dv">210</span></span>
<span id="cb75-27"><a href="#cb75-27"></a><span class="dv">6</span>      </span>
<span id="cb75-28"><a href="#cb75-28"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># write.csv(tmp, '/my/path/here/mymodel.csv')</span></span></code></pre></div>
</div>
<div id="write-modelsum-object-to-a-separate-word-or-html-file" class="section level2">
<h2 class="hasAnchor">
<a href="#write-modelsum-object-to-a-separate-word-or-html-file" class="anchor"></a>17. Write <code>modelsum</code> object to a separate Word or HTML file</h2>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">## write to an HTML document</span></span>
<span id="cb76-2"><a href="#cb76-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">write2html</span>(tab2, <span class="st">"~/ibm/trash.html"</span>)</span>
<span id="cb76-3"><a href="#cb76-3"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb76-4"><a href="#cb76-4"></a><span class="er">&gt;</span><span class="st"> </span><span class="co">## write to a Word document</span></span>
<span id="cb76-5"><a href="#cb76-5"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">write2word</span>(tab2, <span class="st">"~/ibm/trash.doc"</span>, <span class="dt">title=</span><span class="st">"My table in Word"</span>)</span></code></pre></div>
</div>
<div id="use-modelsum-in-r-shiny" class="section level2">
<h2 class="hasAnchor">
<a href="#use-modelsum-in-r-shiny" class="anchor"></a>18. Use <code>modelsum</code> in R Shiny</h2>
<p>The easiest way to output a <code><a href="../reference/modelsum.html">modelsum()</a></code> object in an R Shiny app is to use the <code>tableOutput()</code> UI in combination with the <code>renderTable()</code> server function and <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame(summary(modelsum()))</a></code>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="co"># A standalone shiny app</span></span>
<span id="cb77-2"><a href="#cb77-2"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">library</span>(shiny)</span>
<span id="cb77-3"><a href="#cb77-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(arsenal)</span>
<span id="cb77-4"><a href="#cb77-4"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">data</span>(mockstudy)</span>
<span id="cb77-5"><a href="#cb77-5"></a><span class="op">&gt;</span><span class="st"> </span></span>
<span id="cb77-6"><a href="#cb77-6"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">shinyApp</span>(</span>
<span id="cb77-7"><a href="#cb77-7"></a><span class="op">+</span><span class="st">   </span><span class="dt">ui =</span> <span class="kw">fluidPage</span>(<span class="kw">tableOutput</span>(<span class="st">"table"</span>)),</span>
<span id="cb77-8"><a href="#cb77-8"></a><span class="op">+</span><span class="st">   </span><span class="dt">server =</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb77-9"><a href="#cb77-9"></a><span class="op">+</span><span class="st">     </span>output<span class="op">$</span>table &lt;-<span class="st"> </span><span class="kw">renderTable</span>({</span>
<span id="cb77-10"><a href="#cb77-10"></a><span class="op">+</span><span class="st">       </span><span class="kw">as.data.frame</span>(<span class="kw">summary</span>(<span class="kw">modelsum</span>(age <span class="op">~</span><span class="st"> </span>sex, <span class="dt">data =</span> mockstudy), <span class="dt">text =</span> <span class="st">"html"</span>))</span>
<span id="cb77-11"><a href="#cb77-11"></a><span class="op">+</span><span class="st">     </span>}, <span class="dt">sanitize.text.function =</span> <span class="cf">function</span>(x) x)</span>
<span id="cb77-12"><a href="#cb77-12"></a><span class="op">+</span><span class="st">   </span>}</span>
<span id="cb77-13"><a href="#cb77-13"></a><span class="op">+</span><span class="st"> </span>)</span></code></pre></div>
<p>This can be especially powerful if you feed the selections from a <code>selectInput(multiple = TRUE)</code> into <code><a href="../reference/formulize.html">formulize()</a></code> to make the table dynamic!</p>
</div>
<div id="use-modelsum-in-bookdown" class="section level2">
<h2 class="hasAnchor">
<a href="#use-modelsum-in-bookdown" class="anchor"></a>23. Use <code>modelsum</code> in bookdown</h2>
<p>Since the backbone of <code><a href="../reference/modelsum.html">modelsum()</a></code> is <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable()</a></code>, tables still render well in bookdown. However, <code>print.summary.modelsum()</code> doesn’t use the <code>caption=</code> argument of <code>kable()</code>, so some tables may not have a properly numbered caption. To fix this, use the method described <a href="https://bookdown.org/yihui/bookdown/tables.html">on the bookdown site</a> to give the table a tag/ID.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(age <span class="op">~</span><span class="st"> </span>sex, <span class="dt">data =</span> mockstudy), <span class="dt">title=</span><span class="st">"(</span><span class="ch">\\</span><span class="st">#tab:mytableby) Caption here"</span>)</span></code></pre></div>
</div>
<div id="model-multiple-endpoints" class="section level2">
<h2 class="hasAnchor">
<a href="#model-multiple-endpoints" class="anchor"></a>24. Model multiple endpoints</h2>
<p>You can now use <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> on the left-hand side of <code><a href="../reference/modelsum.html">modelsum()</a></code> to give multiple endpoints. Note that only one “family” can be specified this way (use <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> instead if you want multiple families).</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(<span class="kw">list</span>(age, hgb) <span class="op">~</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>sex, <span class="dt">adjust =</span> <span class="op">~</span><span class="st"> </span>arm, <span class="dt">data =</span> mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">58.053</td>
<td align="left">1.614</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.001</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.059</td>
<td align="left">0.055</td>
<td align="left">0.289</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.593</td>
<td align="left">0.718</td>
<td align="left">0.408</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.171</td>
<td align="left">0.819</td>
<td align="left">0.834</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">60.108</td>
<td align="left">0.597</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-1.232</td>
<td align="left">0.611</td>
<td align="left">0.044</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.693</td>
<td align="left">0.709</td>
<td align="left">0.329</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.148</td>
<td align="left">0.812</td>
<td align="left">0.855</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">11.565</td>
<td align="left">0.267</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.005</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.028</td>
<td align="left">0.009</td>
<td align="left">0.003</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.046</td>
<td align="left">0.118</td>
<td align="left">0.699</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.065</td>
<td align="left">0.133</td>
<td align="left">0.624</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">12.505</td>
<td align="left">0.096</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.032</td>
<td align="left">266</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.642</td>
<td align="left">0.099</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.131</td>
<td align="left">0.115</td>
<td align="left">0.256</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.131</td>
<td align="left">0.130</td>
<td align="left">0.313</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>To avoid confusion about which table is which endpoint, you can set <code>term.name=TRUE</code> in <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>. This takes the labels for each endpoint and puts them in the top-left of the table.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(<span class="kw">list</span>(age, hgb) <span class="op">~</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>sex, <span class="dt">adjust =</span> <span class="op">~</span><span class="st"> </span>arm, <span class="dt">data =</span> mockstudy), <span class="dt">term.name =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Age, yrs</th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">58.053</td>
<td align="left">1.614</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.001</td>
<td align="left">33</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.059</td>
<td align="left">0.055</td>
<td align="left">0.289</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.593</td>
<td align="left">0.718</td>
<td align="left">0.408</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.171</td>
<td align="left">0.819</td>
<td align="left">0.834</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">60.108</td>
<td align="left">0.597</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-1.232</td>
<td align="left">0.611</td>
<td align="left">0.044</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.693</td>
<td align="left">0.709</td>
<td align="left">0.329</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.148</td>
<td align="left">0.812</td>
<td align="left">0.855</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left">hgb</th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">11.565</td>
<td align="left">0.267</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.005</td>
<td align="left">294</td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.028</td>
<td align="left">0.009</td>
<td align="left">0.003</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.046</td>
<td align="left">0.118</td>
<td align="left">0.699</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.065</td>
<td align="left">0.133</td>
<td align="left">0.624</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">12.505</td>
<td align="left">0.096</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.032</td>
<td align="left">266</td>
</tr>
<tr class="even">
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.642</td>
<td align="left">0.099</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Treatment Arm F: FOLFOX</strong></td>
<td align="left">0.131</td>
<td align="left">0.115</td>
<td align="left">0.256</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"><strong>Treatment Arm G: IROX</strong></td>
<td align="left">0.131</td>
<td align="left">0.130</td>
<td align="left">0.313</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="model-data-by-a-non-test-group-strata" class="section level2">
<h2 class="hasAnchor">
<a href="#model-data-by-a-non-test-group-strata" class="anchor"></a>25. Model data by a non-test group (strata)</h2>
<p>You can also specify a grouping variable that doesn’t get tested (but instead separates results): a <em>strata</em> variable.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(<span class="kw">modelsum</span>(<span class="kw">list</span>(age, hgb) <span class="op">~</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>sex, <span class="dt">strata =</span> arm, <span class="dt">data =</span> mockstudy))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Treatment Arm</th>
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A: IFL</td>
<td align="left">(Intercept)</td>
<td align="left">59.147</td>
<td align="left">2.783</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">9</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.019</td>
<td align="left">0.100</td>
<td align="left">0.851</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">59.903</td>
<td align="left">0.683</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.002</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.651</td>
<td align="left">1.151</td>
<td align="left">0.572</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">F: FOLFOX</td>
<td align="left">(Intercept)</td>
<td align="left">57.194</td>
<td align="left">2.407</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">20</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.112</td>
<td align="left">0.087</td>
<td align="left">0.197</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">60.691</td>
<td align="left">0.574</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.000</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.962</td>
<td align="left">0.901</td>
<td align="left">0.286</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">G: IROX</td>
<td align="left">(Intercept)</td>
<td align="left">59.188</td>
<td align="left">2.873</td>
<td align="left">&lt; 0.001</td>
<td align="left">-0.003</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.023</td>
<td align="left">0.104</td>
<td align="left">0.822</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">60.702</td>
<td align="left">0.759</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.007</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-2.346</td>
<td align="left">1.200</td>
<td align="left">0.051</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table class="table">
<thead><tr class="header">
<th align="left">Treatment Arm</th>
<th align="left"></th>
<th align="left">estimate</th>
<th align="left">std.error</th>
<th align="left">p.value</th>
<th align="left">adj.r.squared</th>
<th align="left">Nmiss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A: IFL</td>
<td align="left">(Intercept)</td>
<td align="left">11.247</td>
<td align="left">0.459</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.013</td>
<td align="left">77</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.039</td>
<td align="left">0.017</td>
<td align="left">0.018</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">12.527</td>
<td align="left">0.109</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.037</td>
<td align="left">69</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.703</td>
<td align="left">0.182</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">F: FOLFOX</td>
<td align="left">(Intercept)</td>
<td align="left">11.661</td>
<td align="left">0.414</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.004</td>
<td align="left">157</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.026</td>
<td align="left">0.015</td>
<td align="left">0.085</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">12.661</td>
<td align="left">0.095</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.037</td>
<td align="left">141</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.707</td>
<td align="left">0.151</td>
<td align="left">&lt; 0.001</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">G: IROX</td>
<td align="left">(Intercept)</td>
<td align="left">11.874</td>
<td align="left">0.457</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.001</td>
<td align="left">60</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="left">0.019</td>
<td align="left">0.017</td>
<td align="left">0.264</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Intercept)</td>
<td align="left">12.565</td>
<td align="left">0.121</td>
<td align="left">&lt; 0.001</td>
<td align="left">0.016</td>
<td align="left">56</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>sex Female</strong></td>
<td align="left">-0.470</td>
<td align="left">0.188</td>
<td align="left">0.013</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="add-multiple-sets-of-adjustors-to-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#add-multiple-sets-of-adjustors-to-the-model" class="anchor"></a>26. Add multiple sets of adjustors to the model</h2>
<p>By putting multiple formulas into a list, you can use multiple sets of adjustors. Use <code>~ 1</code> or <code>NULL</code> for an “unadjusted” model. By using the <code>adjustment.names=TRUE</code> argument and giving names to your adjustor sets in the list, you can name the various analyses.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="op">&gt;</span><span class="st"> </span>adj.list &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb82-2"><a href="#cb82-2"></a><span class="op">+</span><span class="st">   </span><span class="dt">Unadjusted =</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="co"># can also specify NULL here</span></span>
<span id="cb82-3"><a href="#cb82-3"></a><span class="op">+</span><span class="st">   "Adjusted for Arm"</span> =<span class="st"> </span><span class="er">~</span><span class="st"> </span>arm</span>
<span id="cb82-4"><a href="#cb82-4"></a><span class="op">+</span><span class="st"> </span>)</span>
<span id="cb82-5"><a href="#cb82-5"></a><span class="op">&gt;</span><span class="st"> </span>multi.adjust &lt;-<span class="st"> </span><span class="kw">modelsum</span>(<span class="kw">list</span>(age, bmi) <span class="op">~</span><span class="st"> </span>fu.time <span class="op">+</span><span class="st"> </span>ast, <span class="dt">adjust =</span> adj.list, <span class="dt">data =</span> mockstudy)</span>
<span id="cb82-6"><a href="#cb82-6"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(multi.adjust, <span class="dt">adjustment.names =</span> <span class="ot">TRUE</span>)</span>
<span id="cb82-7"><a href="#cb82-7"></a></span>
<span id="cb82-8"><a href="#cb82-8"></a></span>
<span id="cb82-9"><a href="#cb82-9"></a><span class="op">|</span>adjustment       <span class="op">|</span><span class="st">                            </span><span class="er">|</span>estimate <span class="op">|</span>std.error <span class="op">|</span>p.value <span class="op">|</span>adj.r.squared <span class="op">|</span>Nmiss <span class="op">|</span></span>
<span id="cb82-10"><a href="#cb82-10"></a><span class="er">|:</span><span class="op">----------------</span><span class="er">|:</span><span class="op">---------------------------</span><span class="er">|:</span><span class="op">--------</span><span class="er">|:</span><span class="op">---------</span><span class="er">|:</span><span class="op">-------</span><span class="er">|:</span><span class="op">-------------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|</span></span>
<span id="cb82-11"><a href="#cb82-11"></a><span class="er">|</span>Unadjusted       <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">60.766</span>   <span class="op">|</span><span class="fl">0.512</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.002</span>         <span class="op">|</span><span class="dv">0</span>     <span class="op">|</span></span>
<span id="cb82-12"><a href="#cb82-12"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>fu.time<span class="op">**</span><span class="st">                 </span><span class="er">|</span><span class="op">-</span><span class="fl">0.001</span>   <span class="op">|</span><span class="fl">0.001</span>     <span class="op">|</span><span class="fl">0.061</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-13"><a href="#cb82-13"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">60.420</span>   <span class="op">|</span><span class="fl">0.663</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.002</span>         <span class="op">|</span><span class="dv">0</span>     <span class="op">|</span></span>
<span id="cb82-14"><a href="#cb82-14"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>fu.time<span class="op">**</span><span class="st">                 </span><span class="er">|</span><span class="op">-</span><span class="fl">0.001</span>   <span class="op">|</span><span class="fl">0.001</span>     <span class="op">|</span><span class="fl">0.039</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-15"><a href="#cb82-15"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm F<span class="op">:</span><span class="st"> </span>FOLFOX<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="fl">0.868</span>    <span class="op">|</span><span class="fl">0.717</span>     <span class="op">|</span><span class="fl">0.227</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-16"><a href="#cb82-16"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm G<span class="op">:</span><span class="st"> </span>IROX<span class="op">**</span><span class="st">   </span><span class="er">|</span><span class="fl">0.163</span>    <span class="op">|</span><span class="fl">0.812</span>     <span class="op">|</span><span class="fl">0.841</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-17"><a href="#cb82-17"></a><span class="er">|</span>Unadjusted       <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">61.343</span>   <span class="op">|</span><span class="fl">0.547</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.004</span>         <span class="op">|</span><span class="dv">266</span>   <span class="op">|</span></span>
<span id="cb82-18"><a href="#cb82-18"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>ast<span class="op">**</span><span class="st">                     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.030</span>   <span class="op">|</span><span class="fl">0.012</span>     <span class="op">|</span><span class="fl">0.014</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-19"><a href="#cb82-19"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">61.236</span>   <span class="op">|</span><span class="fl">0.757</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.005</span>         <span class="op">|</span><span class="dv">266</span>   <span class="op">|</span></span>
<span id="cb82-20"><a href="#cb82-20"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>ast<span class="op">**</span><span class="st">                     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.030</span>   <span class="op">|</span><span class="fl">0.012</span>     <span class="op">|</span><span class="fl">0.015</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-21"><a href="#cb82-21"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm F<span class="op">:</span><span class="st"> </span>FOLFOX<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="fl">0.653</span>    <span class="op">|</span><span class="fl">0.779</span>     <span class="op">|</span><span class="fl">0.403</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-22"><a href="#cb82-22"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm G<span class="op">:</span><span class="st"> </span>IROX<span class="op">**</span><span class="st">   </span><span class="er">|</span><span class="op">-</span><span class="fl">0.728</span>   <span class="op">|</span><span class="fl">0.880</span>     <span class="op">|</span><span class="fl">0.408</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-23"><a href="#cb82-23"></a></span>
<span id="cb82-24"><a href="#cb82-24"></a></span>
<span id="cb82-25"><a href="#cb82-25"></a><span class="er">|</span>adjustment       <span class="op">|</span><span class="st">                            </span><span class="er">|</span>estimate <span class="op">|</span>std.error <span class="op">|</span>p.value <span class="op">|</span>adj.r.squared <span class="op">|</span>Nmiss <span class="op">|</span></span>
<span id="cb82-26"><a href="#cb82-26"></a><span class="er">|:</span><span class="op">----------------</span><span class="er">|:</span><span class="op">---------------------------</span><span class="er">|:</span><span class="op">--------</span><span class="er">|:</span><span class="op">---------</span><span class="er">|:</span><span class="op">-------</span><span class="er">|:</span><span class="op">-------------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|</span></span>
<span id="cb82-27"><a href="#cb82-27"></a><span class="er">|</span>Unadjusted       <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">26.494</span>   <span class="op">|</span><span class="fl">0.245</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.008</span>         <span class="op">|</span><span class="dv">33</span>    <span class="op">|</span></span>
<span id="cb82-28"><a href="#cb82-28"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>fu.time<span class="op">**</span><span class="st">                 </span><span class="er">|</span><span class="fl">0.001</span>    <span class="op">|</span><span class="fl">0.000</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-29"><a href="#cb82-29"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">26.658</span>   <span class="op">|</span><span class="fl">0.317</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.007</span>         <span class="op">|</span><span class="dv">33</span>    <span class="op">|</span></span>
<span id="cb82-30"><a href="#cb82-30"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>fu.time<span class="op">**</span><span class="st">                 </span><span class="er">|</span><span class="fl">0.001</span>    <span class="op">|</span><span class="fl">0.000</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-31"><a href="#cb82-31"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm F<span class="op">:</span><span class="st"> </span>FOLFOX<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="op">-</span><span class="fl">0.280</span>   <span class="op">|</span><span class="fl">0.341</span>     <span class="op">|</span><span class="fl">0.413</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-32"><a href="#cb82-32"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm G<span class="op">:</span><span class="st"> </span>IROX<span class="op">**</span><span class="st">   </span><span class="er">|</span><span class="op">-</span><span class="fl">0.237</span>   <span class="op">|</span><span class="fl">0.385</span>     <span class="op">|</span><span class="fl">0.538</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-33"><a href="#cb82-33"></a><span class="er">|</span>Unadjusted       <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">27.331</span>   <span class="op">|</span><span class="fl">0.259</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|-</span><span class="fl">0.000</span>        <span class="op">|</span><span class="dv">294</span>   <span class="op">|</span></span>
<span id="cb82-34"><a href="#cb82-34"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>ast<span class="op">**</span><span class="st">                     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.005</span>   <span class="op">|</span><span class="fl">0.006</span>     <span class="op">|</span><span class="fl">0.433</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-35"><a href="#cb82-35"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span>(Intercept)                 <span class="op">|</span><span class="fl">27.291</span>   <span class="op">|</span><span class="fl">0.356</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|-</span><span class="fl">0.001</span>        <span class="op">|</span><span class="dv">294</span>   <span class="op">|</span></span>
<span id="cb82-36"><a href="#cb82-36"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>ast<span class="op">**</span><span class="st">                     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.004</span>   <span class="op">|</span><span class="fl">0.006</span>     <span class="op">|</span><span class="fl">0.440</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-37"><a href="#cb82-37"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm F<span class="op">:</span><span class="st"> </span>FOLFOX<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="fl">0.181</span>    <span class="op">|</span><span class="fl">0.368</span>     <span class="op">|</span><span class="fl">0.623</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-38"><a href="#cb82-38"></a><span class="er">|</span><span class="st">                 </span><span class="er">|**</span>Treatment Arm G<span class="op">:</span><span class="st"> </span>IROX<span class="op">**</span><span class="st">   </span><span class="er">|</span><span class="op">-</span><span class="fl">0.161</span>   <span class="op">|</span><span class="fl">0.414</span>     <span class="op">|</span><span class="fl">0.698</span>   <span class="op">|</span><span class="st">              </span><span class="er">|</span><span class="st">      </span><span class="er">|</span></span>
<span id="cb82-39"><a href="#cb82-39"></a><span class="er">&gt;</span><span class="st"> </span><span class="kw">summary</span>(multi.adjust, <span class="dt">adjustment.names =</span> <span class="ot">TRUE</span>, <span class="dt">show.intercept =</span> <span class="ot">FALSE</span>, <span class="dt">show.adjust =</span> <span class="ot">FALSE</span>)</span>
<span id="cb82-40"><a href="#cb82-40"></a></span>
<span id="cb82-41"><a href="#cb82-41"></a></span>
<span id="cb82-42"><a href="#cb82-42"></a><span class="op">|</span>adjustment       <span class="op">|</span><span class="st">            </span><span class="er">|</span>estimate <span class="op">|</span>std.error <span class="op">|</span>p.value <span class="op">|</span>adj.r.squared <span class="op">|</span>Nmiss <span class="op">|</span></span>
<span id="cb82-43"><a href="#cb82-43"></a><span class="er">|:</span><span class="op">----------------</span><span class="er">|:</span><span class="op">-----------</span><span class="er">|:</span><span class="op">--------</span><span class="er">|:</span><span class="op">---------</span><span class="er">|:</span><span class="op">-------</span><span class="er">|:</span><span class="op">-------------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|</span></span>
<span id="cb82-44"><a href="#cb82-44"></a><span class="er">|</span>Unadjusted       <span class="op">|</span><span class="er">**</span>fu.time<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="op">-</span><span class="fl">0.001</span>   <span class="op">|</span><span class="fl">0.001</span>     <span class="op">|</span><span class="fl">0.061</span>   <span class="op">|</span><span class="fl">0.002</span>         <span class="op">|</span><span class="dv">0</span>     <span class="op">|</span></span>
<span id="cb82-45"><a href="#cb82-45"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span><span class="er">**</span>fu.time<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="op">-</span><span class="fl">0.001</span>   <span class="op">|</span><span class="fl">0.001</span>     <span class="op">|</span><span class="fl">0.039</span>   <span class="op">|</span><span class="fl">0.002</span>         <span class="op">|</span><span class="dv">0</span>     <span class="op">|</span></span>
<span id="cb82-46"><a href="#cb82-46"></a><span class="er">|</span>Unadjusted       <span class="op">|</span><span class="er">**</span>ast<span class="op">**</span><span class="st">     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.030</span>   <span class="op">|</span><span class="fl">0.012</span>     <span class="op">|</span><span class="fl">0.014</span>   <span class="op">|</span><span class="fl">0.004</span>         <span class="op">|</span><span class="dv">266</span>   <span class="op">|</span></span>
<span id="cb82-47"><a href="#cb82-47"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span><span class="er">**</span>ast<span class="op">**</span><span class="st">     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.030</span>   <span class="op">|</span><span class="fl">0.012</span>     <span class="op">|</span><span class="fl">0.015</span>   <span class="op">|</span><span class="fl">0.005</span>         <span class="op">|</span><span class="dv">266</span>   <span class="op">|</span></span>
<span id="cb82-48"><a href="#cb82-48"></a></span>
<span id="cb82-49"><a href="#cb82-49"></a></span>
<span id="cb82-50"><a href="#cb82-50"></a><span class="er">|</span>adjustment       <span class="op">|</span><span class="st">            </span><span class="er">|</span>estimate <span class="op">|</span>std.error <span class="op">|</span>p.value <span class="op">|</span>adj.r.squared <span class="op">|</span>Nmiss <span class="op">|</span></span>
<span id="cb82-51"><a href="#cb82-51"></a><span class="er">|:</span><span class="op">----------------</span><span class="er">|:</span><span class="op">-----------</span><span class="er">|:</span><span class="op">--------</span><span class="er">|:</span><span class="op">---------</span><span class="er">|:</span><span class="op">-------</span><span class="er">|:</span><span class="op">-------------</span><span class="er">|:</span><span class="op">-----</span><span class="er">|</span></span>
<span id="cb82-52"><a href="#cb82-52"></a><span class="er">|</span>Unadjusted       <span class="op">|</span><span class="er">**</span>fu.time<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="fl">0.001</span>    <span class="op">|</span><span class="fl">0.000</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.008</span>         <span class="op">|</span><span class="dv">33</span>    <span class="op">|</span></span>
<span id="cb82-53"><a href="#cb82-53"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span><span class="er">**</span>fu.time<span class="op">**</span><span class="st"> </span><span class="er">|</span><span class="fl">0.001</span>    <span class="op">|</span><span class="fl">0.000</span>     <span class="op">|</span><span class="er">&lt;</span><span class="st"> </span><span class="fl">0.001</span> <span class="op">|</span><span class="fl">0.007</span>         <span class="op">|</span><span class="dv">33</span>    <span class="op">|</span></span>
<span id="cb82-54"><a href="#cb82-54"></a><span class="er">|</span>Unadjusted       <span class="op">|</span><span class="er">**</span>ast<span class="op">**</span><span class="st">     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.005</span>   <span class="op">|</span><span class="fl">0.006</span>     <span class="op">|</span><span class="fl">0.433</span>   <span class="op">|-</span><span class="fl">0.000</span>        <span class="op">|</span><span class="dv">294</span>   <span class="op">|</span></span>
<span id="cb82-55"><a href="#cb82-55"></a><span class="er">|</span>Adjusted <span class="cf">for</span> Arm <span class="op">|</span><span class="er">**</span>ast<span class="op">**</span><span class="st">     </span><span class="er">|</span><span class="op">-</span><span class="fl">0.004</span>   <span class="op">|</span><span class="fl">0.006</span>     <span class="op">|</span><span class="fl">0.440</span>   <span class="op">|-</span><span class="fl">0.001</span>        <span class="op">|</span><span class="dv">294</span>   <span class="op">|</span></span></code></pre></div>
</div>
</div>
<div id="available-function-options" class="section level1">
<h1 class="hasAnchor">
<a href="#available-function-options" class="anchor"></a>Available Function Options</h1>
<div id="summary-statistics" class="section level2">
<h2 class="hasAnchor">
<a href="#summary-statistics" class="anchor"></a>Summary statistics</h2>
<p>The available summary statistics, by varible type, are:</p>
<ul>
<li>
<code>ordinal</code>: Ordinal logistic regression models
<ul>
<li>default: <code>Nmiss, OR, CI.lower.OR, CI.upper.OR, p.value</code>
</li>
<li>optional: <code>estimate, CI.OR, CI.estimate, CI.lower.estimate, CI.upper.estimate,</code> <code>N, Nmiss2, endpoint, std.error, statistic, logLik, AIC, BIC, edf, deviance, df.residual, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>binomial</code>,<code>quasibinomial</code>: Logistic regression models
<ul>
<li>default: <code>OR, CI.lower.OR, CI.upper.OR, p.value, concordance, Nmiss</code>
</li>
<li>optional: <code>estimate, CI.OR, CI.estimate, CI.lower.estimate, CI.upper.estimate,</code> <code>CI.wald, CI.lower.wald, CI.upper.wald, CI.OR.wald, CI.lower.OR.wald, CI.upper.OR.wald,</code> <code>N, Nmiss2, endpoint, std.error, statistic, logLik, AIC, BIC, null.deviance, deviance, df.residual, df.null, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>gaussian</code>: Linear regression models
<ul>
<li>default: <code>estimate, std.error, p.value, adj.r.squared, Nmiss</code>
</li>
<li>optional: <code>CI.estimate, CI.lower.estimate, CI.upper.estimate, N, Nmiss2, statistic,</code> <code>standard.estimate, endpoint, r.squared, AIC, BIC, logLik, statistic.F, p.value.F, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>poisson</code>, <code>quasipoisson</code>: Poisson regression models
<ul>
<li>default: <code>RR, CI.lower.RR, CI.upper.RR, p.value, Nmiss</code>
</li>
<li>optional: <code>CI.RR, CI.estimate, CI.lower.estimate, CI.upper.estimate, CI.RR, Nmiss2, std.error,</code> <code>estimate, statistic, endpoint, AIC, BIC, logLik, dispersion, null.deviance, deviance, df.residual, df.null, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>negbin</code>: Negative binomial regression models
<ul>
<li>default: <code>RR, CI.lower.RR, CI.upper.RR, p.value, Nmiss</code>
</li>
<li>optional: <code>CI.RR, CI.estimate, CI.lower.estimate, CI.upper.estimate, CI.RR, Nmiss2, std.error, estimate,</code> <code>statistic, endpoint, AIC, BIC, logLik, dispersion, null.deviance, deviance, df.residual, df.null, theta, SE.theta, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>clog</code>: Conditional Logistic models
<ul>
<li>default: <code>OR, CI.lower.OR, CI.upper.OR, p.value, concordance, Nmiss</code>
</li>
<li>optional: <code>CI.OR, CI.estimate, CI.lower.estimate, CI.upper.estimate, N, Nmiss2, estimate, std.error, endpoint, Nevents, statistic,</code> <code>r.squared, r.squared.max, logLik, AIC, BIC, statistic.log, p.value.log, statistic.sc, p.value.sc,</code> <code>statistic.wald, p.value.wald, N, std.error.concordance, p.value.lrt</code>
</li>
</ul>
</li>
<li>
<code>survival</code>: Cox models
<ul>
<li>default: <code>HR, CI.lower.HR, CI.upper.HR, p.value, concordance, Nmiss</code>
</li>
<li>optional: <code>CI.HR, CI.estimate, CI.lower.estimate, CI.upper.estimate, N, Nmiss2, estimate, std.error, endpoint,</code> <code>Nevents, statistic, r.squared, r.squared.max, logLik, AIC, BIC, statistic.log, p.value.log, statistic.sc, p.value.sc,</code> <code>statistic.wald, p.value.wald, N, std.error.concordance, p.value.lrt</code>
</li>
</ul>
</li>
</ul>
<p>The full description of these parameters that can be shown for models include:</p>
<ul>
<li>
<code>N</code>: a count of the number of observations used in the analysis</li>
<li>
<code>Nmiss</code>: only show the count of the number of missing values if there are some missing values</li>
<li>
<code>Nmiss2</code>: always show a count of the number of missing values for a model</li>
<li>
<code>endpoint</code>: dependent variable used in the model</li>
<li>
<code>std.err</code>: print the standard error</li>
<li>
<code>statistic</code>: test statistic</li>
<li>
<code>statistic.F</code>: test statistic (F test)</li>
<li>
<code>p.value</code>: print the p-value</li>
<li>
<code>p.value.lrt</code>: print the likelihood ratio p-value for <em>the main effect only</em> (not the adjustors)</li>
<li>
<code>r.squared</code>: print the model R-square</li>
<li>
<code>adj.r.squared</code>: print the model adjusted R-square</li>
<li>
<code>r.squared.max</code>: print the model R-square</li>
<li>
<code>concordance</code>: print the model C statistic (which is the AUC for logistic models)</li>
<li>
<code>logLik</code>: print the loglikelihood value</li>
<li>
<code>p.value.log</code>: print the p-value for the overall model likelihood test</li>
<li>
<code>p.value.wald</code>: print the p-value for the overall model wald test</li>
<li>
<code>p.value.sc</code>: print the p-value for overall model score test</li>
<li>
<code>AIC</code>: print the Akaike information criterion</li>
<li>
<code>BIC</code>: print the Bayesian information criterion</li>
<li>
<code>null.deviance</code>: null deviance</li>
<li>
<code>deviance</code>: model deviance</li>
<li>
<code>df.residual</code>: degrees of freedom for the residual</li>
<li>
<code>df.null</code>: degrees of freedom for the null model</li>
<li>
<code>dispersion</code>: This is used in Poisson models and is defined as the deviance/df.residual</li>
<li>
<code>statistic.sc</code>: overall model score statistic</li>
<li>
<code>statistic.wald</code>: overall model score statistic</li>
<li>
<code>statistic.log</code>: overall model score statistic</li>
<li>
<code>std.error.concordance</code>: standard error for the C statistic</li>
<li>
<code>HR</code>: print the hazard ratio (for survival models), i.e. exp(beta)</li>
<li>
<code>CI.lower.HR, CI.upper.HR</code>: print the confidence interval for the HR</li>
<li>
<code>OR</code>: print the odd’s ratio (for logistic models), i.e. exp(beta)</li>
<li>
<code>CI.lower.OR, CI.upper.OR</code>: print the confidence interval for the OR</li>
<li>
<code>CI.lower.OR.wald, CI.upper.OR.wald</code>: print the Wald confidence interval for the OR</li>
<li>
<code>RR</code>: print the risk ratio (for poisson models), i.e. exp(beta)</li>
<li>
<code>CI.lower.RR, CI.upper.RR</code>: print the confidence interval for the RR</li>
<li>
<code>estimate</code>: print beta coefficient</li>
<li>
<code>standardized.estimate</code>: print the standardized beta coefficient</li>
<li>
<code>CI.lower.estimate, CI.upper.estimate</code>: print the confidence interval for the beta coefficient</li>
<li>
<code>CI.lower.wald, CI.upper.wald</code>: print the Wald confidence interval for the beta coefficient</li>
<li>
<code>edf</code>: print the effective degrees of freedom.</li>
<li>
<code>theta</code>: print the estimate of theta.</li>
<li>
<code>SE.theta</code>: print the estimate of theta’s standard error.</li>
</ul>
</div>
<div id="modelsum-control-settings" class="section level2">
<h2 class="hasAnchor">
<a href="#modelsum-control-settings" class="anchor"></a><code>modelsum.control</code> settings</h2>
<p>A quick way to see what arguments are possible to utilize in a function is to use the <code><a href="https://rdrr.io/r/base/args.html">args()</a></code> command. Settings involving the number of digits can be set in <code>modelsum.control</code> or in <code>summary.modelsum</code>.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">args</span>(modelsum.control)</span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="cf">function</span> (<span class="dt">digits =</span> 3L, <span class="dt">digits.ratio =</span> 3L, <span class="dt">digits.p =</span> 3L, <span class="dt">format.p =</span> <span class="ot">TRUE</span>, </span>
<span id="cb83-3"><a href="#cb83-3"></a>    <span class="dt">show.adjust =</span> <span class="ot">TRUE</span>, <span class="dt">show.intercept =</span> <span class="ot">TRUE</span>, <span class="dt">conf.level =</span> <span class="fl">0.95</span>, </span>
<span id="cb83-4"><a href="#cb83-4"></a>    <span class="dt">ordinal.stats =</span> <span class="kw">c</span>(<span class="st">"OR"</span>, <span class="st">"CI.lower.OR"</span>, <span class="st">"CI.upper.OR"</span>, <span class="st">"p.value"</span>, </span>
<span id="cb83-5"><a href="#cb83-5"></a>        <span class="st">"Nmiss"</span>), <span class="dt">binomial.stats =</span> <span class="kw">c</span>(<span class="st">"OR"</span>, <span class="st">"CI.lower.OR"</span>, <span class="st">"CI.upper.OR"</span>, </span>
<span id="cb83-6"><a href="#cb83-6"></a>        <span class="st">"p.value"</span>, <span class="st">"concordance"</span>, <span class="st">"Nmiss"</span>), <span class="dt">gaussian.stats =</span> <span class="kw">c</span>(<span class="st">"estimate"</span>, </span>
<span id="cb83-7"><a href="#cb83-7"></a>        <span class="st">"std.error"</span>, <span class="st">"p.value"</span>, <span class="st">"adj.r.squared"</span>, <span class="st">"Nmiss"</span>), <span class="dt">poisson.stats =</span> <span class="kw">c</span>(<span class="st">"RR"</span>, </span>
<span id="cb83-8"><a href="#cb83-8"></a>        <span class="st">"CI.lower.RR"</span>, <span class="st">"CI.upper.RR"</span>, <span class="st">"p.value"</span>, <span class="st">"Nmiss"</span>), <span class="dt">negbin.stats =</span> <span class="kw">c</span>(<span class="st">"RR"</span>, </span>
<span id="cb83-9"><a href="#cb83-9"></a>        <span class="st">"CI.lower.RR"</span>, <span class="st">"CI.upper.RR"</span>, <span class="st">"p.value"</span>, <span class="st">"Nmiss"</span>), <span class="dt">relrisk.stats =</span> <span class="kw">c</span>(<span class="st">"RR"</span>, </span>
<span id="cb83-10"><a href="#cb83-10"></a>        <span class="st">"CI.lower.RR"</span>, <span class="st">"CI.upper.RR"</span>, <span class="st">"p.value"</span>, <span class="st">"Nmiss"</span>), <span class="dt">clog.stats =</span> <span class="kw">c</span>(<span class="st">"OR"</span>, </span>
<span id="cb83-11"><a href="#cb83-11"></a>        <span class="st">"CI.lower.OR"</span>, <span class="st">"CI.upper.OR"</span>, <span class="st">"p.value"</span>, <span class="st">"concordance"</span>, </span>
<span id="cb83-12"><a href="#cb83-12"></a>        <span class="st">"Nmiss"</span>), <span class="dt">survival.stats =</span> <span class="kw">c</span>(<span class="st">"HR"</span>, <span class="st">"CI.lower.HR"</span>, <span class="st">"CI.upper.HR"</span>, </span>
<span id="cb83-13"><a href="#cb83-13"></a>        <span class="st">"p.value"</span>, <span class="st">"concordance"</span>, <span class="st">"Nmiss"</span>), <span class="dt">stat.labels =</span> <span class="kw">list</span>(), </span>
<span id="cb83-14"><a href="#cb83-14"></a>    ...) </span>
<span id="cb83-15"><a href="#cb83-15"></a><span class="ot">NULL</span></span></code></pre></div>
</div>
<div id="summary-modelsum-settings" class="section level2">
<h2 class="hasAnchor">
<a href="#summary-modelsum-settings" class="anchor"></a><code>summary.modelsum</code> settings</h2>
<p>The summary.modelsum function has options that modify how the table appears (such as adding a title or modifying labels).</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">args</span>(arsenal<span class="op">:::</span>summary.modelsum)</span>
<span id="cb84-2"><a href="#cb84-2"></a><span class="cf">function</span> (object, ..., <span class="dt">labelTranslations =</span> <span class="ot">NULL</span>, <span class="dt">text =</span> <span class="ot">FALSE</span>, </span>
<span id="cb84-3"><a href="#cb84-3"></a>    <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">term.name =</span> <span class="st">""</span>, <span class="dt">adjustment.names =</span> <span class="ot">FALSE</span>) </span>
<span id="cb84-4"><a href="#cb84-4"></a><span class="ot">NULL</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ethan Heinzen, Jason Sinnwell, Elizabeth Atkinson, Tina Gunderson, Gregory Dougherty.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
